= Setting up launchpad local domains =

We run Launchpad on development machines using Apache and virtual hosts,
to simulate the production environment as far as possible, and allow
us to use virtual hosts on our local machine.

Here's how to set up your machine to do this.  You need to do these operations
as the root user.

== Modify your /etc/hosts ==

Add this line to /etc/hosts:
{{{
127.0.0.88	launchpad.dev code.launchpad.dev answers.launchpad.dev blueprints.launchpad.dev bugs.launchpad.dev translation.launchpad.dev xmlrpc.launchpad.dev shipit.ubuntu.dev shipit.kubuntu.dev shipit.edubuntu.dev
}}}

As we add more domains, you'll need to alter this line.

== Set up apache ==

If you have apache version 1 installed, remove it:

  sudo apt-get remove apache

Install apache2:

  sudo apt-get install apache2

Turn on proxying:

  sudo a2enmod proxy

Set up virtual hosting:

Create a file at /etc/apache2/sites-enabled/locallaunchpad

{{{
sudo vim /etc/apache2/sites-enabled/locallaunchpad
}}}

Put the following text in there.

{{{
<VirtualHost 127.0.0.88:80>
  ServerName launchpad.dev
  ServerAlias *.launchpad.dev
  LoadModule proxy_http_module /usr/lib/apache2/modules/mod_proxy_http.so
  <Proxy *>
    Order deny,allow
    Allow from 127.0.0.0/255.0.0.0
  </Proxy>
  ProxyPreserveHost on
  ProxyPass / http://localhost:8085/ retry=1
</VirtualHost>
}}}

Reload apache:

  sudo /etc/init.d/apache2 reload

== Use Launchpad ==

As your normal user, run launchpad.  You should be able to access it
at the following URLs:

  http://launchpad.dev/
  http://blueprints.launchpad.dev/

