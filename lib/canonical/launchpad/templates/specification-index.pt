<html
  xmlns="http://www.w3.org/1999/xhtml"
  xmlns:tal="http://xml.zope.org/namespaces/tal"
  xmlns:metal="http://xml.zope.org/namespaces/metal"
  xmlns:i18n="http://xml.zope.org/namespaces/i18n"
  xml:lang="en"
  lang="en"
  dir="ltr"
  metal:use-macro="view/macro:page/onecolumn"
  i18n:domain="launchpad"
>
  <body>

<div metal:fill-slot="main" tal:define="context_menu context/menu:context">
  <p tal:repeat="notice view/notices" tal:content="notice"
     class="informational message">
    notice goes here
  </p>

  <h1><tal:block content="context/title"/>
    <a tal:define="link context_menu/edit"
                 tal:condition="link/enabled"
                 tal:attributes="href link/url"
    ><img tal:attributes="alt link/text; title link/text" src="/@@/edit" /></a>
  </h1>

  <p tal:condition="context/superseded_by" class="warning message">
    This blueprint has been superseded. See the newer blueprint
    "<b><a tal:content="context/superseded_by/title"
           tal:attributes="href context/superseded_by/fmt:url">new blueprint
    title</a></b>" for updated plans.
  </p>

<div id="maincontentsub">
  <div id="nonportlets">
    <table class="summary" style="float: right; margin-left: 1em;">
      <tbody>
        <tr>
          <th>Priority:</th>
          <td><tal:block content="context/priority/title"/>
            <tal:guidance condition="not: context/direction_approved"
            >(Needs guidance)</tal:guidance>
            <a tal:define="link context_menu/priority"
                 tal:condition="link/enabled"
                 tal:attributes="href link/url"
            ><img tal:attributes="alt link/text; title link/text" src="/@@/edit" /></a>
          </td>
        </tr>
        <tr>
          <th>Definition:</th>
          <td>
            <tal:definition replace="context/definition_status/title" />
            <a tal:define="link context_menu/status"
                 tal:condition="link/enabled"
                 tal:attributes="href link/url"
            ><img tal:attributes="alt link/text; title link/text" src="/@@/edit" /></a>
          </td>
        </tr>
        <tr>
          <th>Implementation:</th>
          <td>
            <img tal:condition="context/informational"
                 src="/@@/info" alt="Informational"
                 title="Informational blueprint, no implementation necessary"
                 id="informational-icon"
                 />
            <tal:impl content="context/implementation_status/title">Unknown</tal:impl>
            <a tal:define="link context_menu/status"
                 tal:condition="link/enabled"
                 tal:attributes="href link/url"
            ><img tal:attributes="alt link/text; title link/text" src="/@@/edit" /></a>
          </td>
        </tr>
        <tr>
          <th>Series goal:</th>
          <td>
            <tal:block condition="context/goal">
            <a
              tal:condition="context/goal/required:launchpad.Driver"
              tal:attributes="href string:${context/fmt:url}/+decide"
              tal:content="context/goalstatus/title"
            >Approved</a>
            <tal:cannotchange
              tal:condition="not: context/goal/required:launchpad.Driver"
              tal:replace="context/goalstatus/title"
            >Approved</tal:cannotchange>
            for
            <a tal:condition="context/productseries"
               tal:attributes="href context/productseries/fmt:url"
               tal:content="context/productseries/name">1.2</a>
            <a  tal:condition="context/distroseries"
                tal:attributes="href context/distroseries/fmt:url"
                tal:content="context/distroseries/name">hoary</a>
            </tal:block>
            <tal:none condition="not: context/goal">None</tal:none>
            <a tal:define="link context_menu/proposegoal"
                 tal:condition="link/enabled"
                 tal:attributes="href link/url"
            ><img tal:attributes="alt link/text; title link/text" src="/@@/edit" /></a>
          </td>
        </tr>
        <tr>
          <th>Milestone target:</th>
          <td>
          <a tal:attributes="href context/milestone/fmt:url"
             tal:condition="context/milestone">
            <img alt="milestone icon" src="/@@/milestone" />
            <span tal:replace="context/milestone/name">1.0</span></a>
            <tal:none condition="not: context/milestone">None</tal:none>
            <a tal:define="link context_menu/milestone"
                 tal:condition="link/enabled"
                 tal:attributes="href link/url"
            ><img tal:attributes="alt link/text; title link/text" src="/@@/edit" /></a>
          </td>
        </tr>
        <tr>
          <th>Assignee:</th>
          <td>
            <a tal:condition="context/assignee"
               tal:replace="structure context/assignee/fmt:link">Foo Bar</a>
            <tal:none condition="not: context/assignee">None</tal:none>
            <a tal:define="link context_menu/people"
                 tal:condition="link/enabled"
                 tal:attributes="href link/url"
            ><img tal:attributes="alt link/text; title link/text" src="/@@/edit" /></a>
          </td>
        </tr>
        <tr>
          <th>Drafter:</th>
          <td>
            <a tal:condition="context/drafter"
               tal:replace="structure context/drafter/fmt:link">Foo Bar</a>
            <tal:none condition="not: context/drafter">None</tal:none>
            <a tal:define="link context_menu/people"
                 tal:condition="link/enabled"
                 tal:attributes="href link/url"
            ><img tal:attributes="alt link/text; title link/text" src="/@@/edit" /></a>
          </td>
        </tr>
        <tr>
          <th>Approver:</th>
          <td>
            <a tal:condition="context/approver"
               tal:replace="structure context/approver/fmt:link">Foo Bar</a>
            <tal:none condition="not: context/approver">None</tal:none>
            <a tal:define="link context_menu/people"
                 tal:condition="link/enabled"
                 tal:attributes="href link/url"
            ><img tal:attributes="alt link/text; title link/text" src="/@@/edit" /></a>
          </td>
        </tr>
        <tr>
          <th>Sprints:</th>
          <td>
            <tal:per_sprint tal:condition="context/sprint_links"
                            tal:repeat="sprint_link context/sprint_links">
                <tal:approval replace="structure sprint_link/@@+icon-status" />
                <a
                  tal:attributes="href sprint_link/sprint/fmt:url"
                  tal:content="sprint_link/sprint/name"
                /><br />
            </tal:per_sprint>
            <tal:none condition="not: context/sprint_links">None</tal:none>
            <div tal:define="link context_menu/linksprint"
                 tal:condition="link/enabled"
                 tal:content="structure link/render"
            >Propose for Sprint
            </div>
          </td>
        </tr>
      </tbody>
    </table>
    <tal:desc replace="structure context/summary/fmt:text-to-html">
      The blueprint summary will go here.
    </tal:desc>
    <ul class="menu">
      <li class="link"
          tal:condition="context/specurl">
        <a tal:attributes="href context/specurl"
        ><strong>Read the full specification &raquo;</strong></a>
      </li>
      <tal:block condition="python:context.specurl is None">
        <li tal:condition="context/required:launchpad.AnyPerson"
            class="link">
          <a tal:condition="not:context/specurl" href="+edit"
          >Set the URL for this specification</a>
        </li>
      </tal:block>
    </ul>

  <tal:mentors define="mentoring_offers context/mentoring_offers"
               condition="mentoring_offers">
    <p>
      <img src="/@@/mentoring" alt="Mentoring"
           title="People have offered to mentor this work" />
      <b>Mentors:</b>
      <tal:block repeat="mentoring_offer mentoring_offers">
        <a tal:replace="structure mentoring_offer/owner/fmt:link">foobar</a>
      </tal:block>
    </p>
    <tal:block condition="not: context/is_complete">
      <p tal:condition="view/userIsMentor">
        &raquo;
        <a href="+retractmentoring">Retract my offer of mentorship</a>
      </p>
    </tal:block>
  </tal:mentors>

  <p tal:condition="view/userCanMentor">
    &raquo; <a href="+mentor">Offer to mentor someone implementing
    this blueprint</a>
  </p>

    <h2>Whiteboard
            <a tal:define="link context_menu/whiteboard"
                 tal:condition="link/enabled"
                 tal:attributes="href link/url"
            ><img tal:attributes="alt link/text; title link/text" src="/@@/edit" /></a></h2>
    <div tal:content="structure context/whiteboard/fmt:text-to-html"
         tal:condition="context/whiteboard"
    >Whiteboard text goes here.</div>

      <div tal:condition="view/branch_links" id="branch_links">
        <h2>Related branches</h2>
        <tal:branch repeat="branchlink view/branch_links">
        <dt>
          <tal:branchlink
              replace="structure branchlink/branch/fmt:link"/>
          <a tal:condition="branchlink/required:launchpad.AnyPerson"
             tal:attributes="href branchlink/fmt:url"
             ><img src="/@@/edit" title="Change this branch link" /></a>
        </dt>
        </tal:branch>
      </div>
      <div tal:define="link context_menu/linkbranch"
           tal:condition="link/enabled"
           tal:content="structure link/render"
           style="padding-top:0.5em;" />

      <div tal:condition="view/bug_links" id="bug_links">
        <h2>Related bugs</h2>
        <div class="actions">
          <tal:block repeat="link view/bug_links">
            <tal:link replace="structure link/bug/fmt:link"/><br/>
          </tal:block>
        </div>
      </div>
      <div class="actions">
        <div tal:define="link context_menu/linkbug"
             tal:condition="link/enabled"
             tal:content="structure link/render"
        >Link to a bug
        </div>
        <div tal:define="link context_menu/unlinkbug"
             tal:condition="link/enabled"
             tal:content="structure link/render"
        >Unlink a bug
        </div>
      </div>

      <tal:deptree condition="view/has_dep_tree">
          <h2>Dependency tree</h2>
        <tal:block tal:replace="structure context/@@+deptreeimgtag" />
      <div class="actions">
        <div tal:define="link context_menu/removedependency"
             tal:condition="link/enabled"
             tal:content="structure link/render"
        >Remove Dependency
        </div>
      </div>
        <p class="discreet">
          * Blueprints in grey have been implemented.
        </p>
      </tal:deptree>
      <div class="actions">
        <div tal:define="link context_menu/adddependency"
             tal:condition="link/enabled"
             tal:content="structure link/render"
        >Add Dependency
        </div>
      </div>

      <div tal:replace="structure context/@@+portlet-feedbackqueue" />
      <div class="actions">
        <div tal:define="link context_menu/givefeedback"
             tal:condition="link/enabled"
             tal:content="structure link/render"
        >Give Feedback
        </div>
        <div tal:define="link context_menu/requestfeedback"
             tal:condition="link/enabled"
             tal:content="structure link/render"
        >Request Feedback
        </div>
      </div>

      <div tal:condition="context/goal" class="related">
        <h2>Nearby</h2>
        <ul>

        <li>
          <a tal:attributes="href context/goal/fmt:url">
            Other <tal:goal replace="context/goal/displayname" /> blueprints
          </a>
        </li>
      </ul>
      </div>
    </div>
  </div>
  <div id="portlets">
    <div tal:replace="structure context/@@+portlet-subscribers" />
  </div>
</div>
</body>
</html>
