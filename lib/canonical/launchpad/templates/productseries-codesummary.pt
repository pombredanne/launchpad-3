<tal:root
  xmlns:tal="http://xml.zope.org/namespaces/tal"
  xmlns:metal="http://xml.zope.org/namespaces/metal"
  xmlns:i18n="http://xml.zope.org/namespaces/i18n"
  omit-tag="">

<tal:block condition="not: view/user_branch_visible">
  <div id="branch-details">

    <tal:edit-link condition="context/required:launchpad.Edit">
      <tal:comment condition="nothing">
        We want to show different things depending on whether or not
        the logged in user is able to alter the information for the
        product series.
      </tal:comment>

      <p id="no-rcs-details">
        You haven't yet told Launchpad where your source code is for
        <em><tal:series replace="context/title">evolution MAIN</tal:series></em>.
      </p>

      <p>
        If the code is already in a Bazaar branch registered with Launchpad
        <a href="+linkbranch">link the branch to this series</a>.
      </p>

      <p>
        If the code is in a Bazaar branch not yet on Launchpad
        you can either: have the branch mirrored from a remote location by
        <a tal:attributes="href string:/${context/product/name}/+addbranch">
          registering a mirrored branch</a>; or push the branch
          directly to Launchpad.
      </p>

      <tal:no-keys condition="not:view/user/sshkeys">
        <p id="ssh-key-directions">
          To authenticate with the Launchpad branch upload service, you need
          to <a tal:attributes="href string:${view/user/fmt:url}/+editsshkeys">
          register a SSH key </a>.
        </p>
      </tal:no-keys>
      <tal:user-can-push condition="view/user/sshkeys">
        <p>
          You can push a branch to Launchpad for this project with the name
          <em>trunk</em> using a command line like:<br/>
          <tt><strong>bzr push lp:~<tal:user replace="view/user/name"/>/<tal:project replace="context/product/name"/>/trunk</strong></tt>
        </p>
      </tal:user-can-push>

      <p>
        If the code is in CVS or Subversion you can
        <a tal:attributes="href view/request_import_link">request that the branch be imported to Bazaar</a>.
      </p>

    </tal:edit-link>

    <tal:user-cannot-edit condition="not: context/required:launchpad.Edit">
      <p id="no-rcs-details">
        No revision control details recorded for
        <em><tal:series replace="context/title">evolution MAIN</tal:series></em>.
      </p>
    </tal:user-cannot-edit>
  </div>

</tal:block>

<tal:block tal:condition="view/user_branch_visible">
  <p>The following branch has been registered as the mainline branch
  for this release series:</p>

  <ul class="branch" id="branch-details"
      tal:content="structure context/branch/@@+product-summary-listing" />
</tal:block>

</tal:root>
