<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      lang="en"
      metal:use-macro="context/@@main_template/master"
      i18n:domain="launchpad">

<body>

<metal:leftportlets fill-slot="portlets_one">
  <div tal:replace="structure context/@@+portlet-answercontacts|nothing" />
  <div tal:replace="structure context/@@+portlet-details|nothing" />
  <div tal:condition="context/distribution|nothing"
       tal:replace="structure context/distribution/@@+portlet-answercontacts" />
</metal:leftportlets>

<metal:css fill-slot="head_epilogue">
  <style type="text/css">
    div.inlined-widget {
      display: inline;
    }

    div.inlined-widget div {
      display: inline;
    }
  </style>
</metal:css>

<metal:heading fill-slot="pageheading">
  <h1 i18n:translate="" tal:content="view/pageheading">Questions</h1>
</metal:heading>

<div metal:fill-slot="main"
     tal:define="questions view/searchResults">

  <div>
    <form method="get" id="question-search-form" action=""
          tal:attributes="action request/URL">

      <div style="float: right;"
           tal:content="structure context/@@+ask-a-question-button" />

      <tal:searchbox replace="structure view/widgets/search_text" />

      <tal:sort replace="structure view/widgets/sort" />

      <input tal:replace="structure view/search_action/render" />

      <div class="field"
           tal:condition="view/show_language_control"
           tal:define="widget nocall:view/widgets/language|nothing">
        <label tal:content="widget/label">Label</label>
        (<a href="/+editmylanguages">Change your preferred languages</a>)
        <tal:languages replace="structure widget" />
      </div>

      <div class="field"
           tal:define="widget nocall:view/widgets/status|nothing"
           tal:condition="nocall: widget">
        <div tal:define="error python:view.widget_errors.get('status')"
             tal:attributes="class python:error and 'error' or None">
          <label tal:content="widget/label">Label</label>
          <tal:status tal:replace="structure widget">
            <input type="text" style="width:100%"/>
          </tal:status>

          <div class="message"
               tal:condition="error"
               tal:content="structure error">
            An error message.
          </div>
        </div>
      </div>

    </form>
  </div>

  <tal:no-results condition="not: questions/batch">
    <p i18n:translate=""
       tal:content="view/empty_listing_message">
      No questions.
    </p>
  </tal:no-results>

  <tal:block condition="questions/batch">
    <table class="listing" id="question-listing">
      <thead>
        <tr>
          <th colspan="3" i18n:translate="">Summary</th>
          <th i18n:translate="">Created</th>
          <th i18n:translate="">Submitter</th>
          <th tal:condition="view/display_target_column"
              i18n:translate="">In</th>
          <th tal:condition="view/display_sourcepackage_column"
              i18n:translate="">Source Package</th>
          <th i18n:translate="">Status</th>
        </tr>
      </thead>
      <tbody>
        <tr tal:repeat="question questions/batch"
            tal:attributes="title question/description/fmt:shorten/300">
          <td class="icon right">
            <img alt="Open" title="Open" src="/@@/question"
                 tal:attributes="alt question/status/title;
                                 title question/status/title;" />
          </td>
          <td class="amount"
              tal:content="question/id"
              >42</td>
          <td class="question">
            <a href="#"
               tal:content="question/title"
               tal:attributes="href question/fmt:url">
              Firefox is too slow for my laptop
            </a>
          </td>
          <td>
            <span class="sortkey"
              tal:content="question/datecreated/fmt:datetime" />
            <span
              tal:attributes="title question/datecreated/fmt:datetime"
              tal:content="question/datecreated/fmt:approximatedate">
              2006-07-17
            </span>
          </td>
          <td><a tal:replace="structure question/owner/fmt:link">Foo Bar</a></td>
          <td class="question-target"
              tal:condition="view/display_target_column"
              ><a href="#"
                  tal:define="target question/target"
                  tal:attributes="href string:${target/fmt:url}/+questions"
                  tal:content="target/displayname">Firefox</a></td>
          <td tal:condition="view/display_sourcepackage_column"
              tal:content="structure python:view.formatSourcePackageName(question)"
              >mozilla-firefox</td>
          <td class="questionstatus"
              tal:content="question/status/title"
              tal:attributes="class string:questionstatus${question/status/name}"
              >Open</td>
        </tr>
      </tbody>
    </table>
    <div class="results"
         tal:content="structure questions/@@+navigation-links-lower"
       />
  </tal:block>
</div>

<metal:help fill-slot="help">
  <p>This listing displays the questions matching the selected
    criteria in this context (project, person, sourcepackage).
  </p>
  <p>The search criteria for the current listing can be modified directly at
    the top of the page. You can enter text to see questions that have the
    same terms. When the context has questions in more than one of your
    <a href="/+editmylanguages">preferred languages</a>, you may select the
    languages you wish to view. You can see a questions in all languages
    by unselecting your languages. You must select one or more statuses
    to match questions.
  </p>
  <p>If you hover the mouse over a question, the beginning of its
    description will pop-up after a few seconds.
  </p>
</metal:help>
</body>
</html>
