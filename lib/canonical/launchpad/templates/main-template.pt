<metal:page
  xmlns:metal="http://xml.zope.org/namespaces/metal"
  xmlns:tal="http://xml.zope.org/namespaces/tal"
  define-macro="master"
  tal:define="
    revno modules/canonical.launchpad.versioninfo/revno | string:unknown;
    version string:Launchpad 2.2.4 (r${revno});
  "
><metal:doctype define-slot="doctype"><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"></metal:doctype>
<metal:block define-slot="top_slot" />
<html
  xmlns="http://www.w3.org/1999/xhtml"
  xmlns:tal="http://xml.zope.org/namespaces/tal"
  xmlns:metal="http://xml.zope.org/namespaces/metal"
  xmlns:i18n="http://xml.zope.org/namespaces/i18n"
  xml:lang="en"
  lang="en"
  dir="ltr"
  tal:attributes="lang view/lang|default_language|default;
                  xml:lang view/lang|default_language|default;
                  dir view/dir|string:ltr"
  tal:define="
      rooturl modules/canonical.launchpad.webapp.vhosts/allvhosts/configs/mainsite/rooturl;
      icingroot string:${rooturl}+icing/rev${revno};
      icingroot_contrib string:${rooturl}+icing-contrib/rev${revno};
      devmode modules/canonical.config/config/devmode;
      is_demo modules/canonical.config/config/launchpad/is_demo;
      is_edge modules/canonical.config/config/launchpad/is_edge;
      is_lpnet modules/canonical.config/config/launchpad/is_lpnet;
  "
>
  <head tal:define="yui string:${icingroot}/yui/3.0.0pr2/build;
                lazr_js string:${icingroot}/lazr/build;
                lp_js string:${icingroot}/build"
  >
    <title tal:content="CONTEXTS/fmt:pagetitle">Launchpad</title>
    <tal:atomfeeds condition="view/feed_links | nothing">
      <tal:loop repeat="link view/feed_links">
        <link rel="alternate" type="application/atom+xml"
              tal:attributes="title link/title;
                              href link/href"/>
      </tal:loop>
    </tal:atomfeeds>

    <!-- Launchpad style sheet -->
    <style
      type="text/css"
      media="screen, print"
      tal:condition="not: devmode"
      tal:content="string:@import url(${icingroot}/+style-slimmer.css);"/>
    <style
      type="text/css"
      media="screen, print"
      tal:condition="devmode"
      tal:content="string:@import url(${icingroot}/style.css);"/>
    <style tal:condition="is_demo" type="text/css"
    >html, body {background-image: url(/@@/demo) !important;}</style>
    <tal:comment condition="nothing">
      Internet Explorer apparently doubles the horizontal margins of the
      application tabs, which causes the 'Answers' tab to wrap onto a second
      row. To work around this, we give IE some speshul CSS:
    </tal:comment>
    <!--[if lte IE 7]>
      <style type="text/css">#lp-apps span {margin: 0 0.125%;}</style>
    <![endif]-->
    <tal:comment condition="nothing">
      This CSS collapses the contents of collapsible fieldsets,
      without the flashing that would result from doing it in JavaScript.
      activateCollapsibles() removes the class="collapsed" from fieldsets, to
      re-show their divs, once the children themselves have been collapsed.
    </tal:comment>
    <style type="text/css">
      fieldset.collapsed div, fieldset div.collapsed {display: none;}
    </style>
    <noscript>
      <style type="text/css">
        fieldset.collapsible div, fieldset div.collapsed {display: block;}
      </style>
    </noscript>

    <link rel="stylesheet" type="text/css"
        tal:attributes="href
        string:${icingroot}/lazr/build/lazr/assets/skins/sam/lazr.css"
        />
    <link rel="stylesheet" type="text/css"
        tal:attributes="href
        string:${icingroot}/lazr/build/inlineedit/assets/skins/sam/editor.css"
        />
    <link rel="stylesheet" type="text/css"
        tal:attributes="href
        string:${icingroot}/lazr/build/autocomplete/assets/skins/sam/autocomplete.css"
        />
    <link rel="stylesheet" type="text/css"
        tal:attributes="href
        string:${icingroot}/lazr/build/overlay/assets/skins/sam/pretty-overlay.css"
        />
    <link rel="stylesheet" type="text/css"
        tal:attributes="href
        string:${icingroot}/lazr/build/formoverlay/assets/formoverlay.css"
        />
    <link rel="stylesheet" type="text/css"
        tal:attributes="href
        string:${icingroot}/lazr/build/picker/assets/skins/sam/picker.css"
        />
    <link rel="stylesheet" type="text/css"
        tal:attributes="href
        string:${icingroot}/lazr/build/activator/assets/skins/sam/activator.css"
        />
    <link rel="stylesheet" type="text/css"
        tal:attributes="href
        string:${icingroot}/lazr/build/choiceedit/assets/choiceedit-core.css"
        />

    <tal:devmode condition="devmode">
      <script type="text/javascript"
              tal:attributes="src string:${yui}/yui/yui.js"></script>
      <script type="text/javascript"
              tal:attributes="src string:${yui}/oop/oop.js"></script>
      <script type="text/javascript"
              tal:attributes="src string:${yui}/event/event.js"></script>
      <script type="text/javascript"
              tal:attributes="src string:${yui}/dom/dom.js"></script>
      <script type="text/javascript"
              tal:attributes="src string:${yui}/node/node.js"></script>
      <script type="text/javascript"
              tal:attributes="src string:${yui}/io/io-base.js"></script>
      <script type="text/javascript"
              tal:attributes="src string:${yui}/io/io-form.js"></script>
      <script type="text/javascript"
              tal:attributes="src string:${yui}/json/json.js"></script>
      <script type="text/javascript"
              tal:attributes="src string:${yui}/attribute/attribute.js"></script>
      <script type="text/javascript"
              tal:attributes="src string:${yui}/base/base.js"></script>
      <script type="text/javascript"
              tal:attributes="src string:${yui}/substitute/substitute.js"></script>
      <script type="text/javascript"
              tal:attributes="src string:${yui}/anim/anim.js"></script>
      <script type="text/javascript"
              tal:attributes="src string:${yui}/classnamemanager/classnamemanager.js"></script>
      <script type="text/javascript"
              tal:attributes="src string:${yui}/plugin/plugin.js"></script>
      <script type="text/javascript"
              tal:attributes="src string:${yui}/widget/widget.js"></script>
      <script type="text/javascript"
              tal:attributes="src string:${yui}/widget/widget-position-ext.js"></script>
      <script type="text/javascript"
              tal:attributes="src string:${yui}/cookie/cookie.js"></script>
      <script type="text/javascript"
              tal:attributes="src string:${yui}/widget/widget-position.js"></script>
      <script type="text/javascript"
              tal:attributes="src string:${yui}/widget/widget-position-ext.js"></script>
      <script type="text/javascript"
              tal:attributes="src string:${yui}/widget/widget-stack.js"></script>
      <script type="text/javascript"
              tal:attributes="src string:${yui}/widget/widget-stdmod.js"></script>
      <script type="text/javascript"
              tal:attributes="src string:${yui}/overlay/overlay.js"></script>
      <script type="text/javascript"
              tal:attributes="src string:${yui}/node-menunav/node-menunav.js"></script>

      <script type="text/javascript"
              tal:attributes="src string:${icingroot}/MochiKit.js"></script>
      <script type="text/javascript"
              tal:attributes="src string:${lazr_js}/lazr/lazr.js"></script>
      <script type="text/javascript"
              tal:attributes="src string:${lazr_js}/anim/anim.js"></script>
      <script type="text/javascript"
              tal:attributes="src string:${lazr_js}/inlineedit/editor.js"></script>
      <script type="text/javascript"
              tal:attributes="src string:${lazr_js}/autocomplete/autocomplete.js"></script>
      <script type="text/javascript"
              tal:attributes="src string:${lazr_js}/overlay/overlay.js"></script>
      <script type="text/javascript"
              tal:attributes="src string:${lazr_js}/activator/activator.js"></script>
      <script type="text/javascript"
              tal:attributes="src string:${lazr_js}/picker/picker.js"></script>
      <script type="text/javascript"
              tal:attributes="src string:${lazr_js}/formoverlay/formoverlay.js"></script>
      <script type="text/javascript"
              tal:attributes="src string:${lazr_js}/choiceedit/choiceedit.js"></script>
      <script type="text/javascript"
              tal:attributes="src string:${lazr_js}/effects/effects.js"></script>

      <script type="text/javascript"
              tal:attributes="src string:${lp_js}/lp/lp.js"></script>
      <script type="text/javascript"
              tal:attributes="src string:${lp_js}/lp/picker.js"></script>
      <script type="text/javascript"
              tal:attributes="src string:${lp_js}/sorttable/sorttable.js"></script>
      <script type="text/javascript"
              tal:attributes="src string:${lp_js}/inlinehelp/inlinehelp.js"></script>
      <script type="text/javascript"
              tal:attributes="src string:${lp_js}/client/client.js"></script>
    </tal:devmode>
    <tal:production condition="not:devmode">
      <script type="text/javascript"
              tal:attributes="src string:${icingroot}/build/launchpad.js"></script>
    </tal:production>

    <script type="text/javascript"
        tal:content="string:var cookie_scope = '${request/lp:cookie_scope}';"></script>
    <script type="text/javascript">
      function onLoadFunction() {
        sortables_init();
        initInlineHelp();
      }
      registerLaunchpadFunction(onLoadFunction);
    </script>

    <tal:needs_json tal:condition="request/needs_json">
      <script type="text/javascript"
        tal:attributes="src string:${icingroot_contrib}/json2.js"></script>
      <script type="text/javascript"
        tal:attributes="src string:${icingroot_contrib}/JSONScriptRequest.js"></script>
    </tal:needs_json>
    <tal:needs-gmap2 condition="request/needs_gmap2">
      <tal:devmode condition="devmode">
        <script type="text/javascript"
                tal:attributes="src string:http://maps.google.com/maps?file=api&amp;v=2&amp;key=${modules/canonical.config/config/google/maps_api_key};"
                ></script>
      </tal:devmode>
      <tal:not-devmode condition="not: devmode">
        <script type="text/javascript"
                tal:attributes="src string:https://maps-api-ssl.google.com/maps?oe=utf-8&amp;client=gme-canonical&amp;file=api&amp;v=2&amp;key=${modules/canonical.config/config/google/maps_api_key};"
                ></script>
      </tal:not-devmode>
    </tal:needs-gmap2>
    <script type="text/javascript"
            tal:define="lp_js string:${icingroot}/build"
            tal:attributes="src string:${lp_js}/lp/mapping.js"></script>
    <link rel="shortcut icon" href="/@@/launchpad.png" />
    <metal:block define-slot="head_epilogue"></metal:block>
  </head>
  <body
    id="document"
    tal:attributes="class string:tab-${view/menu:selectedfacetname} ${view/macro:pagetype} yui-skin-sam"
  >
    <div id="locationbar">
      <tal:login replace="structure context/@@login_status" />
      <form
        tal:condition="view/macro:pagehas/globalsearch"
        id="globalsearch"
        action=""
        xml:lang="en" lang="en" dir="ltr"
        method="get"
        accept-charset="UTF-8"
        tal:attributes="action string:${rooturl}+search"
      >
        <img src="/@@/search.png" style="margin-bottom: -4px"
             alt="Search launchpad:" />
        <input type="search" id="search-text" name="field.text" />
      </form>
      <tal:hierarchy replace="structure context/@@+hierarchy" />

    <div
      tal:condition="view/macro:pagehas/applicationtabs"
      tal:define="facetmenu view/menu:facet"
      id="lp-apps"
      class="clearfix"
    >
      <tal:XXX replace="nothing">
        # XXX mpt 2008-07-02 bug=229931: The HTML comment works.
      </tal:XXX>
      <!-- :-) --><tal:facet repeat="link facetmenu">
        <span
          tal:condition="python: link.enabled and link.selected"
          tal:attributes="title link/summary; class string:${link/name} active"
          ><strong
            tal:condition="not:link/linked"
            tal:content="structure link/escapedtext"
          /><a
            tal:condition="link/linked"
            tal:attributes="href link/url"
            tal:content="structure link/escapedtext"
        /></span><span
          tal:condition="python: link.enabled and not link.selected"
          tal:attributes="title link/summary; class link/name"
          ><a
            tal:condition="link/enabled"
            tal:attributes="href link/url"
            tal:content="structure link/escapedtext"
        /></span><span
          tal:condition="not:link/enabled"
          tal:attributes="class string:${link/name} disabled-tab"
          ><strong
            tal:content="structure link/escapedtext"
        /></span><small tal:condition="not:repeat/link/end"
        > / </small></tal:facet>
    </div>

    </div><!--id="locationbar"-->

      <tal:maintenance replace="structure context/@@+maintenancemessage" />
      <h1 metal:define-slot="heading"
          tal:condition="view/macro:pagehas/applicationbuttons" />
      <div tal:condition="view/macro:pagehas/applicationborder" id="mainarea">
        <div id="container">
          <!--[if IE 7]>&nbsp;<![endif]-->
          <tal:XXX condition="nothing">
            # XXX mpt 2008-07-16 bug=249032: This conditional comment should
            # not be necessary.
          </tal:XXX>

                        <tal:noportlets
                          condition="not: view/macro:pagehas/portlets"
                        >
                          <tal:notifications
                            define="notifications request/notifications"
                            condition="notifications"
                          >
                            <metal:notifications
                              use-macro=
                                "context/@@+main-template-macros/notifications"
                            />
                          </tal:notifications>
                        </tal:noportlets>
                        <metal:block define-slot="before_nav_menu"/>
                        <div id="navigation-tabs"
                             tal:condition="view/macro:pagehas/navigationtabs">
                          <div id="context-navigation-tabs"
                               tal:condition="context/menu:navigation">
                            <tal:menu
                              replace="structure context/@@+navigationmenutabs"
                              />
                          </div>
                          <div id="view-navigation-tabs"
                               tal:condition="view/menu:navigation">
                            <tal:menu
                              replace="structure view/@@+navigationmenutabs"
                              />
                          </div>
                        </div>
                        <tal:noportlets condition="not: view/macro:pagehas/portlets">
                          <metal:block define-slot="main" />
                        </tal:noportlets>
                        <div
                          id="maincontent"
                          tal:condition="view/macro:pagehas/portlets"
                        >
                          <div id="nonportlets">

                           <div class="pageheading"
                                tal:condition="view/macro:pagehas/pageheading">
                            <metal:block define-slot="pageheading">
                             <tal:XXX condition="nothing">
                              # XXX Mark Shuttleworth 2007-04-30: Obsolete
                             </tal:XXX>
                            </metal:block>
                          </div>
                          <tal:notifications
                            define="notifications request/notifications"
                            condition="notifications"
                          ><metal:notifications
                              use-macro="context/@@+main-template-macros/notifications" />
                          </tal:notifications>
                          <metal:block define-slot="main" />

                          </div>
                        </div>
                        <div
                          id="portlets" xml:lang="en" lang="en" dir="ltr"
                          tal:condition="view/macro:pagehas/portlets"
                        >
                          <tal:menu condition="view/macro:pagehas/actionsmenu"
                                    replace="structure view/@@+menubox" />
                          <metal:portlets define-slot="portlets" />
                          <metal:portlets define-slot="portlets_two" />
                          <metal:portlets define-slot="portlets_one" />
                        </div>
                        <div class="clear"></div>

         </div><!--id="container"-->
      </div><!--id="mainarea"-->
      <tal:noborder condition="not:view/macro:pagehas/applicationborder">
        <tal:notifications
          define="notifications request/notifications"
          condition="notifications"
        ><metal:notifications
            use-macro="context/@@+main-template-macros/notifications" />
        </tal:notifications>
        <metal:block define-slot="main" />
      </tal:noborder>
     <div id="globalfooter" class="clearfix" xml:lang="en" lang="en" dir="ltr">
        <div id="colophon">
          <a tal:condition="not:request/lp:person" href="/+tour"
          >What is Launchpad?</a>
          <a tal:condition="request/lp:person" href="/feedback"
          >Contact us</a> | <a href="https://help.launchpad.net/">Get help with Launchpad</a>
        </div>
        <div id="lp-arcana">
            &copy;&nbsp;2004-2009&nbsp;<a
                href="http://canonical.com/">Canonical&nbsp;Ltd.</a>
          |
          <a href="/legal">Terms of use</a>
          <span tal:condition="not:is_lpnet" id="lp-version">
            |
            <a
              href="https://help.launchpad.net/LaunchpadReleases"
              tal:content="version"
            />
            <tal:devmode condition="devmode">devmode</tal:devmode>
            <tal:demo condition="is_demo">demo site</tal:demo>
            <tal:edge condition="is_edge">beta site</tal:edge>
          </span>
        </div>
        <ul style="clear: both; margin-top:20px;" tal:condition="nothing">
            <li>Facet name:
              <tal:block tal:replace="view/menu:selectedfacetname" />
            </li>
            <li>Page type:
               <tal:pagetype replace="view/macro:pagetype" />
            </li>
            <li>Has portlet column:
               <span tal:replace="view/macro:pagehas/portlets" />
            </li>
            <li>Has application tabs:
               <span tal:replace="view/macro:pagehas/applicationtabs" />
            </li>
            <li>Has application border:
               <span tal:replace="view/macro:pagehas/applicationborder" />
            </li>
            <li>Has application buttons:
               <span tal:replace="view/macro:pagehas/applicationbuttons" />
            </li>
            <li>Has heading:
               <span tal:replace="view/macro:pagehas/heading" />
            </li>
        </ul>
      </div><!--id="globalfooter"-->

    <div id="help-pane" class="invisible">
      <div id="help-body">
        <tal:XXX condition="nothing">
          # XXX mars 2008-11-07 bug=295254:
          # We use this ugly src="" hack to get rid of an IE6 security
          # warning.  See bug #295234.
        </tal:XXX>
        <iframe
          id="help-pane-content"
          class="invisible"
          src="javascript:void(0);"></iframe>
      </div>
      <div id="help-footer">
        <span id="help-close"></span>
      </div>
    </div>

    <tal:cache condition="view/user|nothing"
               define="cache request/webservicerequest:cache;
                       links cache/links;
                       objects cache/objects;">
      <script tal:repeat="key links"
        tal:content="structure string:LP.client.links['${key}'] =
                        '${links/?key/fmt:api_url}';">
      </script>
      <script tal:repeat="key objects"
        tal:content="structure string:LP.client.cache['${key}'] =
         ${objects/?key/webservice:json};">
      </script>
    </tal:cache>

    <script tal:condition="context/webservice:is_entry"
     tal:content="structure string:LP.client.cache['context'] =
       ${context/webservice:json};">
    </script>

  </body>
</html>
<tal:requestlog
    define="log modules/canonical.launchpad.webapp.adapter/summarize_requests"
    replace="structure string:&lt;!-- at least ${log} --&gt;" />
<tal:version replace="structure string:&lt;!-- ${version} -->" />
</metal:page>
<!-- 1-0 inprogress portlets wrong in IE/Mac -->
