<tal:subs define="subscriptions context/subscriptions">
  <div tal:condition="subscriptions" class="portlet">
    <h2>Specification subscribers</h2>

    <div class="portletBody portletContent">
      <tal:comment replace="nothing">
        This is messy, but the portlet has to convey both subscribers and
        whether or not they are essential. Also, in the case where a person
        can say if the subscription is essential, that subscription
        essentiality indicator needs to be clickable to edit, otherwise not.
        Hence all the duplication.
      </tal:comment>
      <tal:per_sub repeat="subscription subscriptions">
        <a tal:condition="subscription/required:launchpad.Edit"
           tal:attributes="href subscription/fmt:url">
           <img tal:condition="subscription/essential"
             src="/@@/subscriber-essential" />
           <img tal:condition="not: subscription/essential"
             src="/@@/subscriber-inessential" />
        </a>
        <tal:no_edit condition="not: subscription/required:launchpad.Edit">
           <img tal:condition="subscription/essential"
             src="/@@/subscriber-essential" />
           <img tal:condition="not: subscription/essential"
             src="/@@/subscriber-inessential" />
        </tal:no_edit>
        <img src="/@@/user" />
        <a href="#"
           tal:content="subscription/person/browsername"
           tal:attributes="
             href subscription/person/fmt:url">Dafydd Harries</a>
        <br />
      </tal:per_sub>
    </div>
  </div>
</tal:subs>
