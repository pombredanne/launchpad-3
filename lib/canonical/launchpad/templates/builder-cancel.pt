<html
  xmlns="http://www.w3.org/1999/xhtml"
  xmlns:tal="http://xml.zope.org/namespaces/tal"
  xmlns:metal="http://xml.zope.org/namespaces/metal"
  xmlns:i18n="http://xml.zope.org/namespaces/i18n"
  xml:lang="en"
  lang="en"
  dir="ltr"
  metal:use-macro="context/@@main_template/master"
  i18n:domain="launchpad"
>
  <body>
    <metal:heading fill-slot="pageheading">
      <h1>Cancel job</h1>
    </metal:heading>

<metal:leftportlets fill-slot="portlets_one">
    <div tal:replace="structure context/@@+portlet-details" />
</metal:leftportlets>

  <div metal:fill-slot="main" tal:define="job context/currentjob">

    <div tal:condition="job">

    <p
      tal:define="message view/cancelBuildJob"
      tal:condition="message"
      tal:content="structure message"
      class="informational message" 
    />

      <p>
        <tal:builder replace="context/title">BUILDER</tal:builder>
        is processing:
      </p>

    <table class="listing rowNavigation" width="100%">
      <thead>
        <tr>
            <th>Build of</th>
            <th>Queued</th>
            <th>Started</th>
            <th>Time spent so far</th>
        </tr>
      </thead>
      <tbody>
        <tr>
            <td tal:content="job/build/title">NAME</td>
            <td>
              <span
                tal:attributes="title job/build/datecreated/fmt:datetime"
                tal:content="job/build/datecreated/fmt:approximatedate"
                >CREATED</span>
            </td>
            <td>
              <span
                tal:attributes="title job/buildstart/fmt:datetime"
                tal:content="job/buildstart/fmt:approximatedate">STARTED</span>
            </td>
            <td>
              <span tal:replace="job/buildduration/fmt:approximateduration"/>
            </td>
        </tr>
      </tbody>
     </table>

     <p>Are you sure ?</p> 

     <form name="CANCEL" action="" method="POST">
       <input name="BUILDERID" type="hidden" 
              tal:attributes="value context/id"/>
       <input type="submit" value="Cancel Current Job"/>
     </form>
       
    </div>

    <p tal:condition="not:job">
      <dfn tal:content="context/title">BUILDER</dfn> is idle, no need
      to cancel.
    </p>

  </div>
</body>
</html>
