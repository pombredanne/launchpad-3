<html
  xmlns="http://www.w3.org/1999/xhtml"
  xmlns:tal="http://xml.zope.org/namespaces/tal"
  xmlns:metal="http://xml.zope.org/namespaces/metal"
  xmlns:i18n="http://xml.zope.org/namespaces/i18n"
  xml:lang="en"
  lang="en"
  dir="ltr"
  metal:use-macro="context/@@main_template/master"
  i18n:domain="launchpad"
>
  <body>
    <metal:heading fill-slot="pageheading">
      <h1>Your e-mail addresses</h1>
    </metal:heading>

<metal:leftportlets fill-slot="portlets_one">
</metal:leftportlets>

<metal:rightportlets fill-slot="portlets_two">
</metal:rightportlets>

<div metal:fill-slot="main">

  <p
    tal:define="submitted view/emailFormSubmitted"
    tal:condition="submitted"
    tal:content="structure view/message"
    class="informational message"
  />
  
  <form name="email" action="" method="POST">

  <tal:block condition="context/preferredemail">
    <p>Your preferred contact address for all Launchpad e-mail is:</p>
    <ul id="preferred-email">
      <li class="mail"><b tal:content="context/preferredemail/email" /></li>
    </ul>
  </tal:block>

  <tal:block tal:condition="not: context/preferredemail">
  <p>Currently you don't have a contact address in Launchpad. Please choose
  one from the list of confirmed addresses.</p>
  </tal:block>

  <tal:block tal:condition="context/validatedemails">
  <p>These other addresses are confirmed as being yours:</p>

  <div style="padding: 0.7em 0em" id="confirmed-emails">
    <div tal:repeat="email context/validatedemails" >
      <label tal:attributes="for email/email">
        <input type="radio" tal:attributes="value email/email; id email/email"
               name="VALIDATED_SELECTED" /> 
        <b tal:content="email/email" />
      </label>
    </div>
  </div>
  <input type="submit" value="Remove" name="REMOVE_VALIDATED" />
  <input type="submit" value="Set as Contact Address" name="SET_PREFERRED" />
  <br /><br /><br />
  </tal:block>

  <tal:block tal:condition="view/unvalidatedAndGuessedEmails">
  <p>These addresses may also be yours:</p>

  <div style="padding: 0.7em 0em" id="unconfirmed-emails">
    <div tal:repeat="email view/unvalidatedAndGuessedEmails">
      <label tal:attributes="for string:${email}_unvalidated">
        <input type="radio" name="UNVALIDATED_SELECTED"
               tal:attributes="value email; id string:${email}_unvalidated" />
        <b tal:content="email" />
      </label>
    </div>
  </div>
  <input type="submit" value="Remove" name="REMOVE_UNVALIDATED" />
  <input type="submit" value="Confirm" name="VALIDATE" />
  <br /><br /><br />
  </tal:block>

  </form>

  <form name="newemail" action="" method="POST">

  <p>
    Add a new address:
    <input type="text" tal:attributes="value view/notWellFormedEmail|nothing"
           name="newemail" size="23"/>
    <input type="submit" value="Add" name="ADD_EMAIL" />
  </p>

  </form>
</div>
</body>
</html>
