<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      lang="en"
      metal:use-macro="context/@@main_template_2col/master"
      i18n:domain="launchpad"
>
<body>

<div metal:fill-slot="main">

    <h1>Blueprints targeted at <tal:context replace="context/title" /></h1>

  <form name="spec_search" method="GET">

    Show specifications containing:

    <input type="text" name="searchtext"
           tal:attributes="value view/searchtext" />
    <input tal:condition="view/searchrequested"
      type="submit"
      value="Search Again"
      />
    <input tal:condition="not: view/searchrequested"
      type="submit"
      value="Search Specifications"
      />
  </form>

  <table class="listing sortable" id="speclisting"
        tal:condition="view/specs">
    <thead>
      <tr>
        <th>Priority</th>
        <th>Specification</th>
        <th>Definition</th>
        <th>Delivery</th>
        <th>Assignee</th>
        <th>Milestone</th>
      </tr>
    </thead>
    <tbody>
      <tr tal:repeat="spec view/specs">
        <td>
          <span class="sortkey" tal:content="spec/priority/sortkey" />
          <span tal:content="spec/priority/title"
                tal:attributes="
                class string:specpriority${spec/priority/name}">High</span>
        </td>
        <td><a tal:content="spec/name/fmt:shorten/35"
               tal:attributes="
                 href spec/fmt:url;
                 title spec/title">foo-bar-baz</a>
            <img src="/@@/info" alt="Informational"
                 title="Informational specification"
                 tal:condition="spec/informational" />
        </td>
        <td>
          <span class="sortkey" tal:content="spec/status/sortkey" />
          <span tal:content="spec/status/title"
                tal:attributes="
                class string:specstatus${spec/status/name}">Approved
          </span>
        </td>
        <td>
          <span class="sortkey" tal:content="spec/delivery/sortkey" />
          <span
            tal:attributes="class string:specdelivery${spec/delivery/name}"
            tal:content="spec/delivery/title">Deployed</span>
        </td>
        <td>
          <a tal:condition="spec/assignee"
             tal:attributes="href spec/assignee/fmt:url"
             tal:content="spec/assignee/browsername">
            Carlos Perello Marin
          </a>
        </td>
        <td>
          <a tal:condition="spec/milestone"
             tal:attributes="href spec/milestone/fmt:url"
             tal:content="spec/milestone/name">dapperflight4</a>
        </td>
      </tr>
    </tbody>
  </table>

  <tal:nomatches condition="not: view/specs"
                 replace="structure context/@@+nomatches" />

  <p tal:condition="view/specs" class="discreet">
    <span tal:replace="view/specs/count:len">7</span> specification(s) listed.
  </p>

  <p class="discreet">
    You can
    <a href="+specs?acceptance=declined">Show Declined</a> feature goals,
    and if you are a driver of <span tal:replace="context/name">1.0</span>
    then you can accept goals that have been proposed using the 
    <a href="+setgoals">Set Goals</a> action.
  </p>

  <div tal:replace="structure context/@@+blueprint-legend" />

</div>
</body>
</html>
