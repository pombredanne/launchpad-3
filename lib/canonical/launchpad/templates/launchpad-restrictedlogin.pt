<html
  xmlns="http://www.w3.org/1999/xhtml"
  xmlns:tal="http://xml.zope.org/namespaces/tal"
  xmlns:metal="http://xml.zope.org/namespaces/metal"
  xmlns:i18n="http://xml.zope.org/namespaces/i18n"
  xml:lang="en"
  lang="en"
  dir="ltr"
  i18n:domain="launchpad"
>
<tal:do-this-first tal:content="view/process_restricted_form" />
  <head>
    <title>Log in to Launchpad</title>
    <style type="text/css">
      html {
        font-family: "Trebuchet MS", "DejaVu Sans Condensed", "Tahoma", sans-serif;
        font-size: 8pt;
      }
      h1 {background: none; color: #83ad23; font-size: 3em; font-weight: normal;}
      th {font-weight: normal; text-align: right;}
      .oopsid {color: #cc0000; font-weight: bold;}
    </style>
  </head>
  <body>
    <h1>Log in to a Launchpad test site</h1>

    <tal:comment condition="nothing">
      See launchpad-login.pt for an explanation of the numbered comments.
    </tal:comment>

    <!-- 1. already logged in and shouldn't be here: -->
    <tal:block condition="request/lp:person">

      <!-- 2. just logged in successfully: -->
      <p tal:condition="view/login_success">
        You are now logged in as <strong
        tal:content="request/lp:person/browsername">Person Name</strong>.
      </p>

      <tal:block condition="not: view/login_success">
        <h1>You&#8217;re already logged in</h1>
        <p>
          You are already logged in as
          <strong tal:content="request/lp:person/browsername">person
          name</strong>.  If this is not you, please
          <a href="/+logout">log out now</a>.
        </p>
      </tal:block>
    </tal:block>

    <tal:block condition="not: request/lp:person">

      <h1 tal:condition="not: view/login_error">
        Already registered?
      </h1>
      <!-- 4b. just tried to log in and failed: -->
      <div tal:condition="view/login_error">
        <h1>Your login was unsuccessful</h1>
        <p class="error message" tal:content="view/login_error" />
      </div>
      <!-- 4. might want to log in: -->
      <p>
        To log in, enter your e-mail address
        and Launchpad password.
      </p>
      <form name="login" method="POST">
        <table>
          <tr>
            <th>
              <label for="email">E-mail address:</label>
            </th>
            <td>
              <input type="text"
                name="loginpage_email"
                id="email"
                size="30"
                tal:attributes="value request/email | nothing"
              />
              <script>
              <!--
                  document.forms['login'].loginpage_email.focus();
              //-->
              </script>
            </td>
          </tr>
          <tr>
            <th><label for="password">Password:</label></th>
            <td>
              <input
                type="password"
                id="password"
                name="loginpage_password"
              />
            </td>
          </tr>
          <tr>
            <th></th>
            <td>
              <div>
                <input
                  type="submit"
                  name="loginpage_submit_login"
                  value="Log In" />
              </div>
            </td>
          </tr>
        </table>
      </form>

      <p tal:define="non_restricted_url request/form/production|nothing"
         tal:condition="non_restricted_url">
        You may be able to access this page
        <a tal:attributes="href non_restricted_url">on the main
        Launchpad site</a> instead.
      </p>
    </tal:block>
  </body>
</html>

