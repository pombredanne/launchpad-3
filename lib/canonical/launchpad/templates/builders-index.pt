<html
  xmlns="http://www.w3.org/1999/xhtml"
  xmlns:tal="http://xml.zope.org/namespaces/tal"
  xmlns:metal="http://xml.zope.org/namespaces/metal"
  xmlns:i18n="http://xml.zope.org/namespaces/i18n"
  xml:lang="en"
  lang="en"
  dir="ltr"
  metal:use-macro="view/macro:page/onecolumn"
  i18n:domain="launchpad"
>
  <body>

<metal:block fill-slot="head_epilogue">
    <meta http-equiv="refresh" content="300" />
</metal:block>

    <div metal:fill-slot="main">
      <h1>Launchpad build machines</h1>

    <p>
      <tal:add_action
        define="link context/menu:overview/add"
        condition="link/enabled"
        replace="structure link/render" />
    </p>

    <div id="ppa-builders" tal:define="category view/ppa_builders">
      <div metal:use-macro="template/macros/builder-category" />
    </div>

    <div id="other-builders" tal:define="category view/other_builders">
      <div metal:use-macro="template/macros/builder-category" />
    </div>

    <p class="discreet">Generated at <span tal:replace="view/now"/></p>

  </div>

<metal:macros fill-slot="bogus">
<metal:macro define-macro="builder-category">
  <tal:comment replace="nothing">
    This macro expects the following variables defined:
    :category: A BuilderCategory object
  </tal:comment>

   <h2 tal:content="category/title" />

   <table class="listing">
     <tbody>
     <tal:group repeat="builder_group category/groups">
       <tr class="highlighted">
         <th colspan="3" style="text-align: left">
          <tal:processor replace="builder_group/processor_name" />
           &nbsp;&nbsp;&nbsp;
           <span class="discreet">
             <tal:queue-size replace="builder_group/queue_size"
               >2</tal:queue-size> builds waiting in queue
           </span>
         </th>
       </tr>
       <tr class="builder-row" tal:repeat="builder builder_group/builders">
         <td class="icon left">
           <tal:nok condition="not: builder/builderok">
             <img width="14" height="14" alt="[Disabled]"
                  title="Disabled" src="/@@/no" />
           </tal:nok>
        </td>
         <td style="text-align: left; width: 12em">
           <a tal:attributes="href builder/fmt:url"
              tal:content="builder/title/fmt:shorten/30">Bob</a>
           <tal:mode condition="builder/manual">
             (manual)
           </tal:mode>
         </td>
         <td style="text-align: left">
           <tal:status replace="builder/status">Disabled</tal:status>
         </td>
       </tr>
       <tr tal:condition="repeat/builder_group/end" class="note">
         <td>&nbsp;</td>
       </tr>
     </tal:group>
     </tbody>
  </table>

</metal:macro>

</metal:macros>


</body>
</html>

