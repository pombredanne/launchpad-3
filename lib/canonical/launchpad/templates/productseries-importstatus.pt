<tal:block condition="not: context/rcstype">
<tal:block condition="not: view/user_branch_visible">
  <div id="branch-details">
  <p id="no-rcs-details">
    No revision control details recorded for <span
    tal:replace="context/displayname">evolution MAIN</span>.
  </p>

  <p>If upstream is maintained in CVS or SVN, you can
  specify the location of the upstream branch to
  <a tal:attributes="href string:${context/fmt:url}/+source">
  import</a> it as a Bazaar branch.</p>
  </div>
</tal:block>
</tal:block>

<tal:block tal:condition="view/user_branch_visible">
  <p>The following branch has been registered as the mainline branch
  for this release series:</p>

  <ul class="branch" id="branch-details"
      tal:content="structure context/user_branch/@@+product-summary-listing" />
</tal:block>

<tal:block tal:condition="context/rcstype">

  <table>
    <tbody>
        <tal:block condition="context/rcstype/enumvalue:CVS">
          <tr>
            <th>CVS</th>
	  </tr>
	  <tr>
            <th>Root:</th>
            <td id="cvs-root" tal:content="context/cvsroot">
              :pserver:anonymous@anoncvs.gnome.org:/cvs/gnome</td>
	  </tr>
	  <tr>
	    <th>Module:</th>
	    <td id="cvs-module" tal:content="context/cvsmodule">evolution</td>
          </tr>
          <tr>
            <th>Branch:</th>
            <td id="cvs-branch" tal:content="context/cvsbranch">MAIN</td>
          </tr>
        </tal:block>
        <tal:block condition="context/rcstype/enumvalue:SVN">
          <tr>
            <th>Subversion:</th>
            <td id="svn-url" tal:content="context/svnrepository">http://svn.gnome.org/evolution/trunk</td>
          </tr>
        </tal:block>
        <tr tal:condition="context/importstatus">
          <th>Import status:</th>
          <td id="import-status"
              tal:content="context/importstatus/title">Syncing</td>
        </tr>
        <tal:has-import-success condition="view/hasVcsImportSuccessStatus">
          <tr class="secondary">
            <th>Last run:</th>
            <td id="last-import-status">
              <span tal:condition="view/lastVcsImportSuccessful"
                    class="vcsimportSUCCESS">Success</span>
              <span tal:condition="not:view/lastVcsImportSuccessful"
                    class="vcsimportFAILURE">Failure</span>
              <tal:last-attempt-age
                content="view/lastVcsImportAttemptAge/fmt:approximateduration"
              /> ago
            </td>
          </tr>
        </tal:has-import-success>
        <tr class="secondary" tal:condition="context/importstatus">
          <td colspan="2" tal:content="context/importstatus/description">
            This upstream branch is being imported every day to Bazaar.
          </td>
        </tr>
        <tal:block condition="context/import_branch"
            replace="structure context/import_branch/@@+series-reference" />
        <tal:has-import-age condition="view/hasVcsImportBranchAge">
          <tr class="secondary">
            <th>Last imported:</th>
            <td id="import-branch-age"><tal:branch-age
                content="view/currentVcsImportBranchAge/fmt:approximateduration"
              /> ago
            </td>
          </tr>
        </tal:has-import-age>
    </tbody>
  </table>
</tal:block>
