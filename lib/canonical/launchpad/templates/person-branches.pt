<html
  xmlns="http://www.w3.org/1999/xhtml"
  xmlns:tal="http://xml.zope.org/namespaces/tal"
  xmlns:metal="http://xml.zope.org/namespaces/metal"
  xmlns:i18n="http://xml.zope.org/namespaces/i18n"
  xml:lang="en"
  lang="en"
  dir="ltr"
  metal:use-macro="view/macro:page/onecolumn"
  i18n:domain="launchpad"
>

<body>

<div metal:fill-slot="main"
     tal:define="branches view/branches">

  <div style="float:right" id="floating-buttons"
       tal:condition="view/user_in_context_team">
    <tal:comment condition="nothing">
      Only show the register a branch link if the person is in the team for the
      person that we are looking at.  So if the logged in user is looking at
      their own page, or a page of a team that they are in, they see the
      register a branch button, otherwise they don't.
    </tal:comment>
    <div>
      <a href="+addbranch" id="register-branch">
        <img alt="Register a branch"
             src="/+icing/but-lrg-registerabranch.gif"/>
      </a>
    </div>
  </div>

  <h1 tal:content="view/heading">Bazaar branches</h1>

  <div id="no-branch-message" tal:condition="not: view/has_branches">
    <p tal:content="view/no_branch_message">
      There are no branches related to Eric the Viking today.
    </p>
  </div>

  <tal:summary replace="structure context/@@+codesummary"/>

  <tal:has-branches condition="view/has_branches">

    <tal:branchlisting
        content="structure branches/@@+branch-listing" />
  </tal:has-branches>

  <div tal:replace="structure context/@@+portlet-teambranches" />
</div>
</body>
</html>
