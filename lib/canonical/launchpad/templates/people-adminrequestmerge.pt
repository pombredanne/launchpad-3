<tal:do-this-first tal:content="view/processForm" />
<html
  xmlns="http://www.w3.org/1999/xhtml"
  xml:lang="en"
  lang="en"
  metal:use-macro="context/@@main_template/master"
  i18n:domain="launchpad"
>
  <body>
    <metal:heading fill-slot="pageheading">
      <h1>Merge Launchpad accounts</h1>
    </metal:heading>

<div metal:fill-slot="main">

  <form action="" method="POST">
    <tal:block tal:condition="not: view/shouldShowConfirmationPage" >

      <p
        tal:condition="view/errormessages"
        tal:repeat="errors view/errormessages"
        tal:content="structure errors"
        class="error message"
      />

      <label>Duplicated Account:</label>
      <br>
        <span tal:replace="structure view/dupe_account_widget" />
      <br>
      <br>
      <label>Target Account:</label>
      <br>
        <span tal:replace="structure view/target_account_widget" />
      <br>
      <br>
      <input type="submit" name="continue" value="Continue" />
    </tal:block>

    <tal:block tal:condition="view/shouldShowConfirmationPage" > 
      <h1>Admin interface to merge two accounts</h1>
        <p>Are you sure you want to merge
        <strong tal:content="view/dupe_account/displayname">name12</strong>
        (<strong tal:content="view/dupe_account/name">name12</strong>) 
        into
        <strong tal:content="view/target_account/displayname">name16</strong>
        (<strong tal:content="view/target_account/name">name16</strong>)?
        </p>
        The following email addresses are owned by 
        <strong tal:content="view/dupe_account/displayname">name12</strong>
        and are going to be transferred to 
        <strong tal:content="view/target_account/displayname">name16</strong>:
        <br>
        <br>
        <table>
          <tr tal:repeat="email view/emails">
            <td><strong tal:content="email/email"/>
            </td>
          </tr>
        </table>
        <br>

        <input type="submit" name="cancel" value="Cancel" />
        <input type="submit" name="merge" value="Merge" />

        <input type="hidden" name="dupe_name" 
               tal:attributes="value view/dupe_account/name" />
        <input type="hidden" name="target_name" 
               tal:attributes="value view/target_account/name" />
    </tal:block>
  </form>

</div>
    
</body>
</html>
