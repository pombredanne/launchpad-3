<html
  xmlns="http://www.w3.org/1999/xhtml"
  xmlns:tal="http://xml.zope.org/namespaces/tal"
  xmlns:metal="http://xml.zope.org/namespaces/metal"
  xmlns:i18n="http://xml.zope.org/namespaces/i18n"
  xml:lang="en"
  lang="en"
  dir="ltr"
  metal:use-macro="view/macro:page/onecolumn"
  i18n:domain="launchpad"
>
<body>

  <div metal:fill-slot="main"
       tal:define="registered_ppas view/number_of_registered_ppas">

    <h1>Personal Package Archives for <tal:title replace="context/title" /></h1>

    <p>Personal Package Archives (PPA) allow you to upload Ubuntu source
       packages to be built and published as an apt repository by
       Launchpad. You can find out more about PPAs and how to use them in our
       <a href="https://help.launchpad.net/Packaging/PPA">help page</a>.</p>

    <form name="ppa_search" action="" method="GET"
          tal:condition="registered_ppas">

      <p>Search user-contributed software packages published in any
         <tal:distribution replace="context/title">Ubuntu</tal:distribution>
         PPA.</p>

        <table>
          <tbody>
            <tr>
              <th>
                <label for="name">Show PPAs matching:</label>
              </th>
              <td>
                <input
                  id="name"
                  type="text"
                  name="name_filter"
                  style="width: 100%;"
                  tal:attributes="value view/name_filter"
                />
              </td>
              <td><input type="submit" value="Search" /></td>
            </tr>
            <tr>
              <td></td>
              <td>
                <input id="inactive"
                  type="checkbox"
                  name="show_inactive"
                  tal:attributes="checked view/show_inactive"
                />
                <label for="inactive">
                  Including descriptions of empty PPAs
                </label>
              </td>
              <td></td>
            </tr>
          </tbody>
        </table>

    </form>

    <tal:batch define="batch view/search_results">

      <div id="ppa_list" tal:condition="batch">
        <tal:navigation_top
             replace="structure view/batchnav/@@+navigation-links-upper" />

        <table class="listing sortable">
          <thead>
            <tr>
              <th>Owner</th>
              <th>Description</th>
              <th>Sources</th>
              <th>Binaries</th>
            </tr>
          </thead>
          <tbody>
            <tr tal:repeat="ppa batch" tal:replace="structure ppa/@@+ppa-row" />
          </tbody>
        </table>

        <tal:navigation_bottom
             replace="structure view/batchnav/@@+navigation-links-lower" />
      </div>

      <div id="empty-result" tal:condition="not: batch">

        <div style="padding-top: 1em;" tal:condition="view/name_filter">
           No matching Personal Package Archive
           for '<tal:name_filter replace="view/name_filter" />'.
        </div>

        <tal:information condition="not: view/name_filter">

          <div class="left">

            <div class="section" id="ppa_statistics">
              <h2>Statistics</h2>
              <tal:has_ppas condition="registered_ppas">
                <ul>
                  <li><tal:ppa_registered
                        replace="registered_ppas"
                    >10</tal:ppa_registered> registered PPAs</li>
                  <li><tal:ppa_active
                        replace="view/number_of_active_ppas"
                    >4</tal:ppa_active> active PPAs</li>
                  <li><tal:ppa_sources
                        replace="view/number_of_ppa_sources"
                    >20</tal:ppa_sources> published sources</li>
                  <li><tal:ppa_binaries
                        replace="view/number_of_ppa_binaries"
                    >20</tal:ppa_binaries> published binaries</li>
                </ul>
              </tal:has_ppas>
              <tal:has_no_ppas condition="not: registered_ppas">
                 <p><tal:distribution replace="context/displayname" />
                    does not have any registered PPA.</p>
              </tal:has_no_ppas>
            </div>

            <div class="section" id="ppa_most_active"
                 tal:condition="registered_ppas">
              <h2>Most active</h2>

              <p>PPAs with the highest number of uploads in the
                 last 7 days.</p>

              <table>
                <tr tal:repeat="most_active view/most_active_ppas">
                  <td>
                    <a tal:attributes="href most_active/archive/fmt:url"
                       tal:content="most_active/archive/owner/fmt:displayname">
                      Celso Providelo
                    </a>
                  </td>
                  <td align="right">
                    <tal:sources replace="most_active/uploads" /> uploads
                  </td>
                </tr>
              </table>
            </div>

            <div class="section" id="ppa_latest_uploads"
                 tal:condition="registered_ppas">
              <h2>Latest uploads</h2>
              <ul class="source package">
                <li tal:repeat="pub view/latest_ppa_source_publications">
                  <tal:source_title replace="pub/displayname">
                    mozilla-firefox - 1.0 in warty
                  </tal:source_title> in
                  <a tal:attributes="href pub/archive/fmt:url"
                     tal:content="pub/archive/title"
                    >PPA for Celso Providelo </a>
                  <tal:datepublished replace="pub/age/fmt:approximateduration">
                    3 minutes</tal:datepublished> ago
               </li>
              </ul>
            </div>

          </div> <!-- left div -->

          <div style="width: 49%; clear: right; float: right;">
            <div class="section" id="supports_virtualized_archs"
                 tal:content="structure context/@@+portlet-ppa-architectures" />
          </div>

        </tal:information>

      </div> <!-- empty-results -->

    </tal:batch>

  </div>

</body>
</html>
