<html
  xmlns="http://www.w3.org/1999/xhtml"
  xmlns:tal="http://xml.zope.org/namespaces/tal"
  xmlns:metal="http://xml.zope.org/namespaces/metal"
  xmlns:i18n="http://xml.zope.org/namespaces/i18n"
  xml:lang="en"
  lang="en"
  dir="ltr"
  metal:use-macro="context/@@main_template/master"
  i18n:domain="launchpad"
>
  <body>
    <metal:heading fill-slot="pageheading">
      <h1>Binary package search results</h1>
    </metal:heading>

<metal:leftportlets fill-slot="portlets_one">
  <div tal:replace="structure context/@@+portlet-details" />
</metal:leftportlets>

<div metal:fill-slot="main">

  <form name="search" method="GET">
  
    <div>Find packages with names containing:</div>
    <input type="text"
      name="text"
      size="35"
      tal:attributes="value request/text|nothing" />

    <input type="submit" value="Search"
        tal:condition="not: view/searchrequested" />
    <input type="submit" value="Search Again"
        tal:condition="view/searchrequested" />

  </form>

  <tal:searching condition="view/searchrequested">

    <tal:has_matches condition="view/searchresults">

      <tal:per_match repeat="drbp view/searchresults">
        <img src="/@@/package-binary" />
        <a tal:content="drbp/name"
           tal:attributes="href drbp/fmt:url">foobar</a>:
        <div style="margin-left: 30px; font-size: 80%;"
             tal:content="drbp/summary">
          Gee whiz special package.
          <span tal:replace="drbp/description"
                tal:condition="python:view.matches &lt; 5">
            Gee whiz special package description goes here if there are
            fewer than 5 matches.
          </span>
        </div>
      </tal:per_match>

    </tal:has_matches>

      <p tal:condition="not: view/matches">
        No packages matching "<span tal:replace="view/text">amarok</span>"
        are published in
        <span tal:replace="context/displayname">hoary</span>.
      </p>

  </tal:searching>

</div>

</body>

</html>
