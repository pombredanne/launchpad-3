<html
  xmlns="http://www.w3.org/1999/xhtml"
  xmlns:tal="http://xml.zope.org/namespaces/tal"
  xmlns:metal="http://xml.zope.org/namespaces/metal"
  xmlns:i18n="http://xml.zope.org/namespaces/i18n"
  xml:lang="en"
  lang="en"
  dir="ltr"
  metal:use-macro="context/@@main_template/master"
  i18n:domain="launchpad"
>

<head>
  <tal:block metal:fill-slot="head_epilogue">
    <link
        tal:condition="not:context/hide_email_addresses"
        rel="meta" type="application/rdf+xml"
        title="FOAF" href="+rdf"
        />
  </tal:block>
</head>

<body>
<div metal:fill-slot="main" class="pillar"
  tal:define="overview_menu context/menu:overview">

  <div class="actions" style="float:right;"
    tal:condition="overview_menu/edit/enabled"
    tal:content="structure overview_menu/edit/fmt:link-icon">
  </div>

  <tal:icon replace="structure context/image:mugshot" />

  <h1 tal:content="context/browsername" />

  <div
    class="description"
    tal:condition="context/homepage_content"
    tal:content="structure context/homepage_content/fmt:text-to-html"
  />
  <div
    class="description"
    tal:content="structure context/teamdescription/fmt:text-to-html"
  />
  <ul class="buttons" tal:define="mentorships context/team_mentorships">
    <li tal:condition="mentorships">
      <a href="+mentoring" title="People will mentor work for newcomers">
        <img alt="Mentorships" src="/+icing/but-sml-mentoring.gif" />
      </a>
    </li>
    <li tal:condition="not: mentorships">
      <a href="+mentoring" title="No mentoring is yet offered for this team">
        <img alt="Mentorships" src="/+icing/but-sml-mentoring-off.gif" />
      </a>
    </li>
    <tal:not-restricted
        condition="not: context/subscriptionpolicy/enumvalue:RESTRICTED">
      <li tal:condition="not: view/userIsParticipant">
        <a href="+join" title="Sign up as a member of this team">
          <img alt="Join!" src="/+icing/but-sml-jointhisteam.gif" />
        </a>
      </li>
    </tal:not-restricted>
  </ul>

  <div class="section" tal:content="structure context/@@+portlet-map" />

  <div class="left">
    <tal:recent-members>
    <div class="section">
    <div class="portlet" id="your-involvement">
      <h2>Your involvement</h2>

      <p tal:condition="not: request/lp:person">
        You must <a href="+login">log in</a>
        to join or leave this team.
      </p>
      <tal:logged-in condition="request/lp:person">
        <tal:is-owner condition="view/userIsOwner">
          <span tal:condition="context/teamowner/is_team">
            You are a member of the team which owns this team.
          </span>
          <span tal:condition="not: context/teamowner/is_team">
            You are the owner of this team.
          </span>
          <span tal:condition="not: view/userIsActiveMember">
            You are not currently an active member.
          </span>
        </tal:is-owner>
        <tal:not-owner condition="not: view/userIsOwner">
          <p tal:condition="view/userIsActiveMember">
            <tal:can-leave condition="view/userCanRequestToLeave">
              <form class="actions"
                    name="leave"
                    id="form.team.leave"
                    action="+leave"
                    method="post">
                You are a member of this team.
                <input type="submit" name="leave" value="Leave the Team" />
              </form>
            </tal:can-leave>
          </p>
          <p tal:condition="not: view/userIsActiveMember">
            <tal:not-member condition="not: view/userIsParticipant">
              You are not a member of this team.
            </tal:not-member>
            <tal:participant condition="view/userIsParticipant">
              You are an indirect member of this team:
              <br />
              <a tal:replace="structure view/user/fmt:link">
                Guilherme Salgado
              </a>
              <tal:path repeat="team view/findUserPathToTeam">
                &rarr;
                <a tal:replace="structure team/fmt:link">
                  Launchpad Developers
                </a>
              </tal:path>
            </tal:participant>
          </p>
        </tal:not-owner>
        <tal:block condition="view/userIsParticipant">
          <p tal:condition="view/team_has_mailing_list">
            <tal:subscribed-to-list
                condition="view/user_is_subscribed_to_list">
              <form class="actions"
                    name="unsubscribe"
                    id="form.list.unsubscribe"
                    action=""
                    method="post">
                You are subscribed to the team mailing list.
                <input type="submit" name="unsubscribe" value="Unsubscribe" />
              </form>
            </tal:subscribed-to-list>
            <tal:can-subscribe-to-list
                condition="view/user_can_subscribe_to_list">
              You are not subscribed to the team mailing list.
              (<a href="/people/+me/+editemails">Subscribe</a>)
            </tal:can-subscribe-to-list>
          </p>
        </tal:block>
      </tal:logged-in>
    </div>
    </div>

    <div tal:condition="context/@@+restricted-membership/userCanViewMembership"
         class="section">
    <div class="portlet" id="recently-approved"
         tal:condition="view/recently_approved_members">
      <h2>Recently approved</h2>
      <ul>
        <li class="person"
            tal:repeat="person view/recently_approved_members">
          <a tal:attributes="href person/fmt:url"
             tal:content="person/fmt:unique_displayname"
          >Foo Bar (name16)</a>
        </li>
      </ul>
    </div>
    </div>
    <div tal:condition="context/@@+restricted-membership/userCanViewMembership"
         class="section">
    <div class="portlet" id="recently-applied"
         tal:condition="view/recently_proposed_members">
      <h2>Recently applied</h2>
      <ul>
        <li class="person"
            tal:repeat="person view/recently_proposed_members">
          <a tal:attributes="href person/fmt:url"
             tal:content="person/fmt:unique_displayname"
          >Foo Bar (name16)</a>
        </li>
      </ul>
    </div>
    </div>
    </tal:recent-members>

    <div class="section"
         tal:content="structure context/@@+portlet-related-projects" />

  </div>

  <div class="right">

    <div class="section"
         tal:content="structure context/@@+portlet-details" />

    <div class="section"
         tal:content="structure context/@@+portlet-contact-details" />

    <div class="section">
      <div class="portlet" id="subteam-of">
        <h2>Subteam of</h2>

        <p tal:condition="not:context/super_teams">
          &#8220;<span tal:replace="context/browsername"/>&#8221;
          itself is not a member of any other team.
        </p>

        <tal:block condition="context/super_teams">
          <p>
            &#8220;<span tal:replace="context/browsername"/>&#8221;
            is a member of these teams:
          </p>
          <ul>
            <li tal:repeat="team context/super_teams">
              <tal:block replace="structure team/fmt:link" />
            </li>
          </ul>
        </tal:block>
      </div>
    </div>

  </div>

</div>
</body>
</html>
