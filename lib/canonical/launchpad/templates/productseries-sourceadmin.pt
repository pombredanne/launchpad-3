<tal:layout define="columns1 default">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
  lang="en"
  metal:use-macro="context/@@main_template_2col/master"
  i18n:domain="launchpad">

<body>

    <div metal:fill-slot="main">

              <h1>Register an upstream branch for importing</h1>

              <p tal:condition="not:view/has_errors">
                Once you enter the details of the
                <abbr title="revision control system">RCS</abbr>
                you use for this product series,
                Launchpad can attempt to import that code
                and publish it as a Bazaar branch.
                This lets distributors share code with you more efficiently,
                and also allows distributed upstream development.
              </p>

              <form method="post">
  
                <fieldset>
                  <legend>CVS Repository</legend>
                  <table>
                    <tbody>
                      <tr>
                        <th><label>Root:</label></th>
                        <td>
                          <input type="text" name="cvsroot" size="30"
                          tal:attributes="value view/cvsroot" />
                          <span class="fieldRequired">(Required)</span>
                        </td>
                      </tr>
                      <tr>
                        <th><label>Module:</label></th>
                        <td>
                          <input type="text" name="cvsmodule" size="30"
                          tal:attributes="value view/cvsmodule" />
                          <span class="fieldRequired">(Required)</span>
                        </td>
                      </tr>
                      <tr>
                        <th><label>Branch name:</label></th>
                        <td>
                          <input type="text" name="cvsbranch" size="30"
                          tal:attributes="value view/cvsbranch" />
                          <span class="fieldRequired">(Required)</span>
                        </td>
                      </tr>
                    </tbody>
                  </table>
                </fieldset>

                <fieldset>

  <legend>SVN Repository</legend>
  
                  <table>
                    <tbody>
                      <tr>
                        <th><label>Repository:</label></th>
                        <td>
                          <div>
                            <input type="text" name="svnrepository" size="35"
                            tal:attributes="value view/svnrepository" />
                            <span class="fieldRequired">(Required)</span>
                          </div>
                          <div class="formHelp">
                            Address for the SVN repository, in either
                            <code>svn://</code> or
                            <code>http</code>(<code>s</code>)<code>://</code>
                            form.
                          </div>
                        </td>
                      </tr>
                    </tbody>
                  </table>
                </fieldset>

                <fieldset>
                  <legend>Import and Sync Details</legend>
                  <table>
                    <tbody>
                      <tr>
                        <th><label>Import from:</label></th>
                        <td>
                          <div>
                            <span tal:replace="structure view/rcs_selector" />
                            <span class="fieldRequired">(Required)</span>
                          </div>
                          <div class="formHelp">
                            Which RCS details to use for the import.
                          </div>
                        </td>
                      </tr>
                      <tr>
                        <th><label>Arch archive:</label></th>
                        <td>
                          <input type="text" name="targetarcharchive" size="30"
                          tal:attributes="value view/targetarcharchive" />
                        </td>
                      </tr>
                      <tr class="formHelp">
                        <th>Recommended:</th>
                        <td>
                          <code tal:content="view/default_targetarcharchive" />
                        </td>
                      </tr>
                      <tr>
                        <th><label>Arch category:</label></th>
                        <td>
                          <input type="text" name="targetarchcategory" size="30"
                          tal:attributes="value view/targetarchcategory" />
                        </td>
                      </tr>
                      <tr class="formHelp">
                        <th>Recommended:</th>
                        <td>
                          <code tal:content="view/default_targetarchcategory" />
                        </td>
                      </tr>
                      <tr>
                        <th><label>Arch branch:</label></th>
                        <td>
                          <input type="text" name="targetarchbranch" size="30"
                          tal:attributes="value view/targetarchbranch" />
                        </td>
                      </tr>
                      <tr class="formHelp">
                        <th>Recommended:</th>
                        <td>
                          <code tal:content="view/default_targetarchbranch" />
                        </td>
                      </tr>
                      <tr>
                        <th><label>Arch version:</label></th>
                        <td>
                          <input type="text" name="targetarchversion" size="30"
                          tal:attributes="value view/targetarchversion" />
                        </td>
                      </tr>
                      <tr class="formHelp">
                        <th>Recommended:</th>
                        <td tal:content="view/default_targetarchversion" />
                      </tr>
                    </tbody>
                  </table>
                </fieldset>

                <tal:has_import_status condition="context/importstatus" >
                  <fieldset>
                    <legend>Import status</legend>

                    <p>The current import status is:
                      <b tal:content="context/importstatus/title"/>.
                    </p>

                    <div tal:condition="context/autoTestFailed">
                      <label>
                        <input type="checkbox" name="resetToAutotest" />
                        Rerun this import in the Autotester.
                      </label>
                    </div>

                    <div class="field" tal:condition="not:context/syncCertified">
                      <label>
                        <input type="checkbox" name="syncCertified"/>
                        Approve this import for production and publication.
                      </label>
                    </div>
                  </fieldset>
                </tal:has_import_status >

                <fieldset>
                  <legend>FTP Details</legend>
                  <table>
                    <tbody>
                      <tr>
                        <th><label>Root directory URL:</label></th>
                        <td>
                          <input name="releaseroot" size=40
                          tal:attributes="value context/releaseroot" />
                        </td>
                      </tr>
                      <tr class="formHelp">
                        <th>Example:</th>
                        <td>
                          <code>ftp://www.mozilla.org/pub/firefox/1.1/</code>
                        </td>
                      </tr>
                      <tr class="formHelp">
                        <th />
                        <td>
                          The directory containing releases that are
                          part of this series.
                          Launchpad automatically scans this directory
                          regularly to import new releases.
                        </td>
                      </tr>
                      <tr>
                        <th><label>Filename pattern:</label></th>
                        <td>
                          <input name="releasefileglob" size=40
                          tal:attributes="value context/releasefileglob" />
                        </td>
                      </tr>
                      <tr class="formHelp">
                        <th>Example:</th>
                        <td><code>firefox-1.1.*.src.tgz</code></td>
                      </tr>
                      <tr class="formHelp">
                        <th />
                        <td>
                          Launchpad uses this pattern to find new releases of
                          <span tal:replace="context/product/displayname" />
                          when they are uploaded to the root directory.
                        </td>
                      </tr>
                    </tbody>
                  </table>
                </fieldset>

  <div class="actions">

  <tal:x condition="nothing">
    DO NOT CHANGE THE VALUE OF THIS.
    It is used to verify that the correct form was posted.
  </tal:x>
  <input type="submit"
     name="admin_productseries_source"
     value="Update RCS Details" />

  </div>

  </form>

  </div>

  </body>
</html>
</tal:layout>
