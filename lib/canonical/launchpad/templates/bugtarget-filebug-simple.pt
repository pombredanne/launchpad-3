<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      lang="en"
      metal:use-macro="context/@@main_template_2col/master"
      i18n:domain="malone"
>
<body>

<metal:leftportlets fill-slot="portlets_one">
  <div tal:replace="structure context/@@+portlet-latestbugs|nothing" />
</metal:leftportlets>

<metal:heading fill-slot="pageheading">
  <h3 tal:condition="context/title|nothing"
      tal:content="context/title">Foo Series: main</h3>
  <h1>Report a new bug</h1>
</metal:heading>

<div metal:fill-slot="main">

  <tal:uses_malone tal:condition="view/contextUsesMalone">

  <div tal:condition="view/shouldShowSteps" style="float: right;">
    <div metal:use-macro="context/@@+filebug-steps/steps" />
  </div>

  <form action="."
        tal:attributes="action request/URL"
        method="post"
        enctype="multipart/form-data">

  <div tal:condition="view/widgets/distribution|nothing">
    <label tal:attributes="for view/widgets/distribution/name">
      Distribution
    </label>
    <div tal:content="structure view/widgets/distribution" />
  </div>

  <div tal:condition="view/widgets/packagename|nothing"
       style="margin-top: 1em">
    <div tal:attributes="class python:view.widget_errors.get('packagename') and 'error' or ''"
         tal:define="name_radio_selected view/shouldSelectPackageName">
    <label tal:attributes="for view/widgets/packagename/name">
      In what package did you find this bug?
    </label>
    <ul style="list-style: none"
        tal:define="select_packagename view/shouldSelectPackageName">
      <li>
        <input type="radio" name="packagename_option" value="none"
               id="no-package"
               tal:attributes="checked not:select_packagename"/>
        <label style="font-weight: normal" for="no-package">
          I don't know
        </label>
      </li>
      <li style="margin-top: 4px">
        <input type="radio" name="packagename_option" value="choose"
               id="choose"
               tal:attributes="checked select_packagename"/>
        <span tal:content="structure view/widgets/packagename" />
      </li>
    </ul>
    <div
      tal:condition="view/widget_errors/packagename|nothing"
      class="message"
      tal:content="view/widget_errors/packagename"
    >An error on package name.</div>
    </div>
  </div>

  <div style="margin-top: 1em">
    <label tal:content="structure view/widgets/title/label"
           tal:attributes="for view/widgets/title/name" />
    <div tal:content="structure view/widgets/title" />
  </div>

  <div style="margin-top: 1em">
    <label tal:attributes="for view/widgets/comment/name">
      Further information, steps to reproduce, etc.
    </label>
    <div tal:content="structure view/widgets/comment" />
  </div>

  <div class="actions">
    <input tal:replace="structure view/actions/field.actions.submit_bug/render" />
  </div>

  </form>

  </tal:uses_malone>

  <tal:not_uses_malone tal:condition="not: view/contextUsesMalone">
    <p class="error message">
      <span tal:replace="context/displayname">Alsa Utils</span> does not use Malone as its bug tracker.
    </p>

    <p>
      To report a bug about <span tal:replace="context/displayname">Alsa Utils</span>,
      please use its official bug tracker.
    </p>
  </tal:not_uses_malone>

</div>

</html>

