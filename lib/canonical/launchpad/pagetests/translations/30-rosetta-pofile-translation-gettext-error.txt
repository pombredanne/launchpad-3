Here, we will see that we get error messages when we try to submit
translations with errors.

First, we need to define a function to see that the message we are
interested on doesn't have any translation.

  >>> user_browser.open(
  ...     "http://translations.launchpad.dev/ubuntu/hoary/+source/"
  ...     "evolution/+pots/evolution-2.2/es/+translate?start=20")

We are going to change message #21, but first, we see that this messages
has no translations at all.

  >>> print find_tag_by_id(
  ...     user_browser.contents, 'msgset_150').renderContents()
  21.
  <input type="hidden" name="msgset_150" />
  >>> print find_tag_by_id(
  ...     user_browser.contents, 'msgset_150_singular').renderContents()
  Found <code>%i</code> invalid file.
  >>> print find_tag_by_id(user_browser.contents,
  ...                      'msgset_150_es_translation_0').renderContents()
  (no translation yet)
  >>> print find_tag_by_id(user_browser.contents,
  ...                      'msgset_150_es_translation_1').renderContents()
  (no translation yet)

We are going to submit now translations for the singular and plural forms.
We also need to set the checkbox to True so the submit takes care of that
submission and doesn't ignore it.

  >>> user_browser.getControl(
  ...     name='msgset_150_es_translation_0_radiobutton').value = [
  ...         'msgset_150_es_translation_0_new']
  >>> user_browser.getControl(
  ...     name='msgset_150_es_translation_0_new').value = (
  ...         u'Found %s invalid file')
  >>> user_browser.getControl(
  ...     name='msgset_150_es_translation_1_radiobutton').value = [
  ...         'msgset_150_es_translation_1_new']
  >>> user_browser.getControl(name='msgset_150_es_translation_1_new').value = (
  ...     u'Found %s invalid files')
  >>> user_browser.getControl(name='submit_translations').click()

We got an error, that means the url should be the same.
We are still in the same URL, because the system detected an error.

  >>> print user_browser.url
  http://translations.launchpad.dev/ubuntu/hoary/+source/evolution/+pots/evolution-2.2/es/+translate?start=20

And we can see the error.

  >>> for tag in find_tags_by_class(user_browser.contents, 'error'):
  ...     print tag
  <div class="error message">There is an error in a translation you provided.
    Please correct it before continuing.</div>
  <tr class="error translation">
    <th colspan="3">
      <strong>Error in Translation:</strong>
    </th>
    <td>
    </td><td>
      <div>
        format specifications in 'msgid' and 'msgstr[0]' for argument 1 are
        not the sameformat specifications in 'msgid' and 'msgstr[1]' for
        argument 1 are not the same
      </div>
    </td>
  </tr>

The translation form got an error with the translations we wanted to store,
and thus we still have that text as part of translations input, otherwise, they
will be empty waiting for new suggestions/translations.

  >>> user_browser.getControl(name='msgset_150_es_translation_0_new').value
  'Found %s invalid file'
  >>> user_browser.getControl(name='msgset_150_es_translation_1_new').value
  'Found %s invalid files'

Also, we can see that the message has no active translation yet:

  >>> print find_tag_by_id(
  ...     user_browser.contents, 'msgset_150').renderContents()
  21.
  <input type="hidden" name="msgset_150" />
  >>> print find_tag_by_id(
  ...     user_browser.contents, 'msgset_150_singular').renderContents()
  Found <code>%i</code> invalid file.
  >>> print find_tag_by_id(user_browser.contents,
  ...                      'msgset_150_es_translation_0').renderContents()
  (no translation yet)
  >>> print find_tag_by_id(user_browser.contents,
  ...                      'msgset_150_es_translation_1').renderContents()
  (no translation yet)
