= Editing Questions =

To edit the title and description of question, one uses the 'Edit Question'
menu item. You need to be logged in to perform that action:

    >>> anon_browser.open('http://launchpad.dev/firefox/+question/2')
    >>> anon_browser.getLink('Edit question').click()
    Traceback (most recent call last):
    ...
    Unauthorized...

    >>> user_browser.open('http://launchpad.dev/firefox/+question/2')
    >>> user_browser.getLink('Edit question').click()
    >>> user_browser.url
    '.../firefox/+question/2/+edit'

When we post the form, we should be redirected back to the question page.

    >>> description = (
    ...   "Hi! I'm trying to learn about SVG but I can't get it to work at "
    ...   "all in firefox. Maybe there is a plugin? Help! Thanks. Mark")
    >>> user_browser.getControl('Description').value = description
    >>> summary = "Problem showing the SVG demo on W3C web site"
    >>> user_browser.getControl('Summary').value = summary
    >>> user_browser.getControl('Continue').click()

    >>> user_browser.url
    '.../firefox/+question/2'

And viewing that page should show the updated information.

    >>> soup = find_main_content(user_browser.contents)
    >>> print soup.first('div', 'report').renderContents().strip()
    <p>Hi! I'm trying to learn about SVG but I can't get it to work at
    all in firefox. Maybe there is a plugin? Help! Thanks. Mark</p>
    >>> print soup.first('h1').renderContents()
    Problem showing the SVG demo on W3C web site

You can even modify the title and description of 'Answered' and
'Invalid' questions:

    >>> user_browser.open('http://launchpad.dev/ubuntu/+question/3')
    >>> portlet_details = find_tag_by_id(
    ...     user_browser.contents, 'portlet-details')
    >>> portlet_details.first('b', text='Status:').next.strip()
    u'Invalid'
    >>> user_browser.getLink('Edit question')
    <Link...>


== Source Package ==

Distribution questions can have a source package associated with them.
Any logged in user can change the question source package on the
'Edit Question' page.

    >>> user_browser.open('http://launchpad.dev/ubuntu/+question/5')
    >>> user_browser.getLink('Edit question').click()
    >>> user_browser.getControl(
    ...     name='field.target.package').value = 'linux-source-2.6.15'
    >>> user_browser.getControl('Continue').click()

    >>> portlet_details = find_tag_by_id(
    ...     user_browser.contents, 'portlet-details')
    >>> print portlet_details.first('b', text='For:').next.strip()
    ubuntu linux-source-2.6.15

Product questions ignore sourcepackage information if it is submitted:

    >>> user_browser.open('http://launchpad.dev/firefox/+question/2')
    >>> user_browser.getLink('Edit question').click()
    >>> user_browser.getControl(
    ...     name='field.target.package').value = 'linux-source-2.6.15'
    >>> user_browser.getControl('Continue').click()
    >>> portlet_details = find_tag_by_id(
    ...     user_browser.contents, 'portlet-details')
    >>> print portlet_details.first('b', text='For:').next.strip()
    firefox


== Changing Other Metadata ==

A user with 'launchpad.Admin' privilege (usually the product or
distribution owner) can also change the question Assignee, and
edit the Status Whiteboard using the 'Edit Question' page.

    >>> browser.addHeader(
    ...   'Authorization', 'Basic jeff.waugh@ubuntulinux.com:jdub')
    >>> browser.open('http://localhost/ubuntu/+question/5')
    >>> browser.getLink('Edit question').click()

    >>> browser.getControl('Assignee').value = 'name16'
    >>> browser.getControl('Status Whiteboard').value = 'Some note'
    >>> browser.getControl('Continue').click()

    >>> soup = find_main_content(browser.contents)
    >>> print soup.first('b', text='Whiteboard:').findNext('td').renderContents()
    Some note
    >>> portlet_details = find_tag_by_id(browser.contents, 'portlet-details')
    >>> print extract_text(portlet_details.first('b', text='Assignee:').findNext('a'))
    Foo Bar

Since the assignee is notified of changes to the question, his name also
appears under the 'Also notified' list in the 'Subscribers' portlet:

    >>> portlet = find_tag_by_id(browser.contents, id='portlet-subscribers')
    >>> also_notified = portlet.first('b')
    >>> also_notified
    <b>Also notified:</b>
    >>> also_notified.findNextSibling('ul')
    <ul class="person">
      <li>
        <a href=".../~name16">Foo Bar</a>
      </li>
    </ul>

These fields cannot be modified by a non-privileged user:

    >>> user_browser.open('http://localhost/ubuntu/+question/5')
    >>> user_browser.getLink('Edit question').click()
    >>> user_browser.getControl('Assignee')
    Traceback (most recent call last):
    ...
    LookupError...
    >>> user_browser.getControl('Status Whiteboard')
    Traceback (most recent call last):
    ...
    LookupError...
