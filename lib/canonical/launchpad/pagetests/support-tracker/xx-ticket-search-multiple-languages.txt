= Searching Support Requests in Multiple Languages =

By default, only support requests written in English or one of the
user preferred languages are listed and searched.

For example, a user who isn't logged in will only see support requests
written in English, in one of the language configured in his browser,
or inferred from GeoIP information. In this example, only English
support requests will be shown.

    >>> anon_browser.open('http://launchpad.dev/distros/ubuntu/+tickets')

    >>> from BeautifulSoup import BeautifulSoup
    >>> soup = BeautifulSoup(anon_browser.contents)
    >>> for ticket in soup.fetch('td', 'ticket'):
    ...     print ticket.first('a').renderContents()
    Continue playing after shutdown
    Play DVDs in Totem
    mailto: problem in webpage
    Installation of Java Runtime Environment for Mozilla
    Slow system

    # Since we have more than 5 results, some of them are in the second batch.
    >>> anon_browser.getLink('Next').click()
    >>> soup = BeautifulSoup(anon_browser.contents)
    >>> for ticket in soup.fetch('td', 'ticket'):
    ...     print ticket.first('a').renderContents()
    Installation failed

Since there are some request languages that are not displayed, a message
is displayed to that effect.

    >>> for message in find_tags_by_class(anon_browser.contents, 'message'):
    ...     print message.renderContents()
    Only support requests in English are displayed. To see support
    requests in other languages, either
    <a href="/+editmylanguages">change your preferred</a> languages
    or select the &ldquo;All Languages&rdquo; option.

If the user selects the 'All Languages' option, then all support
requests, whatever the language they are written in are displayed:

    >>> anon_browser.getControl('All Languages').selected = True
    >>> anon_browser.getControl('Search').click()
    >>> soup = BeautifulSoup(anon_browser.contents)
    >>> for ticket in soup.fetch('td', 'ticket'):
    ...     ticket.first('a').renderContents()
    'Problema al recompilar kernel con soporte smp (doble-n\xc3\xbacleo)'
    'Continue playing after shutdown'
    'Play DVDs in Totem'
    'mailto: problem in webpage'
    'Installation of Java Runtime Environment for Mozilla'

    # Since we have more than 5 results, some of them are in the second batch.
    >>> anon_browser.getLink('Next').click()
    >>> soup = BeautifulSoup(anon_browser.contents)
    >>> for ticket in soup.fetch('td', 'ticket'):
    ...     ticket.first('a').renderContents()
    'Slow system'
    'Installation failed'

When that option is selected, no warning message will appear:

    >>> anon_browser.getControl('All Languages').selected
    True

    >>> for message in find_tags_by_class(anon_browser.contents, 'message'):
    ...     print message.renderContents()

But if the user configures his browser to accept Spanish, then all
languages will be displayed and no warning nor 'All Languages' control
will appear:

    >>> anon_browser.addHeader('Accept-Language', 'es')
    >>> anon_browser.open('http://launchpad.dev/distros/ubuntu/+tickets')

    >>> anon_browser.getControl('All Languages')
    Traceback (most recent call last):
      ...
    LookupError...

    >>> for message in find_tags_by_class(anon_browser.contents, 'message'):
    ...     print message.renderContents()

    >>> soup = BeautifulSoup(anon_browser.contents)
    >>> for ticket in soup.fetch('td', 'ticket'):
    ...     ticket.first('a').renderContents()
    'Problema al recompilar kernel con soporte smp (doble-n\xc3\xbacleo)'
    'Continue playing after shutdown'
    'Play DVDs in Totem'
    'mailto: problem in webpage'
    'Installation of Java Runtime Environment for Mozilla'

    # Since we have more than 5 results, some of them are in the second batch.
    >>> anon_browser.getLink('Next').click()
    >>> soup = BeautifulSoup(anon_browser.contents)
    >>> for ticket in soup.fetch('td', 'ticket'):
    ...     ticket.first('a').renderContents()
    'Slow system'
    'Installation failed'

= Multiple Request Languages in Latest Support Requests =

There is a portlet listing the latest support requests on the product or
distribution (though currently this is not used on the product or
distribution pages). It displays all the requests, whatever the user
preferred languages. (Since this portlet is there to give an idea of
activity, it also advertises multi-language activity. This also avoids
misleading the user by showing no requests when there could be in other
languages.)

    >>> browser.open('http://launchpad.dev/firefox/+portlet-latesttickets')
    >>> portlet = find_portlet(
    ...    browser.contents, 'Latest support requests')
    >>> for link in portlet.fetch('a'):
    ...    link.renderContents()
    'Problemas de Impress\xc3\xa3o no Firefox'
    "Newly installed plug-in doesn't seem to be used"
    'Firefox loses focus and gets stuck'
    'Problem showing the SVG demo on W3C site'
    'Firefox cannot render Bank Site'

The same is true for the portlet listing the latest requests involving
a person:

    >>> browser.open('http://launchpad.dev/people/carlos')
    >>> portlet = find_portlet(
    ...    browser.contents, 'Latest support requests')
    >>> for link in portlet.fetch('a'):
    ...    link.renderContents()
    'Problema al recompilar kernel con soporte smp (doble-n\xc3\xbacleo)'
