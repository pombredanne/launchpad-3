= Support Contacts =

Each product and distros can have support contacts. Support contacts
receive notifications for new tickets as well as changes to existing
ones.

The list of support contacts is displayed in the 'Support Contact'
portlet which is available on the 'Support' facet of the product or
distro.

    >>> user_browser.open('http://launchpad.dev/ubuntu/+tickets')
    >>> from BeautifulSoup import BeautifulSoup
    >>> soup = BeautifulSoup(user_browser.contents)
    >>> portlet = soup.first('div', id='portlet-support-contacts')
    >>> portlet.first('h2')
    <h2>Support contacts for Ubuntu</h2>
    >>> portlet.first('p')
    <p>
      <i>There are no support contacts.</i>
    </p>

Anybody can become a support contact. To register as a support contact,
the user clicks on the 'Support Contact' link:

    >>> user_browser.getLink('Support Contact').click()
    >>> soup = BeautifulSoup(user_browser.contents)
    >>> soup.first('h1')
    <h1>Manage support contacts</h1>

That page displays a series of checkboxes. One for the user and one for
each team that user is a member of. Both direct and implicit team
memberships are listed.

    >>> user_browser.getControl(
    ...     name='field.support_contact_teams').options
    ['landscape-developers', 'name18', 'name20']

The user can select any of these checkboxes to register himself or one
of his team as a support contact. In our case, the user decides to
register himself, the Landscape Developers team and the Ubuntu Gnome Team
(which he is only implicitely subscribed).

    >>> user_browser.getControl(
    ...     "I want to be a support contact for Ubuntu").selected = True
    >>> user_browser.getControl("Landscape Developers").selected = True
    >>> user_browser.getControl("Ubuntu Gnome Team").selected = True
    >>> user_browser.getControl('Continue').click()

Confirmation of the support contact registrations are displayed and the
new support contacts appear in the 'Support Contacts' portlet:

    >>> soup = BeautifulSoup(user_browser.contents)
    >>> for tag in soup.fetch('div', 'informational message'):
    ...     print tag.renderContents()
    You have been added as a support contact for Ubuntu.
    Landscape Developers has been added as a support contact for Ubuntu.
    Ubuntu Gnome Team has been added as a support contact for Ubuntu.

    >>> soup.first('div', id='portlet-support-contacts').first('ul')
     <ul class="people">
      <li>
        <a href=".../~landscape-developers">Landscape Developers</a>
      </li>
      <li>
        <a href=".../~name12">Sample Person</a>
      </li>
      <li>
        <a href=".../~name18">Ubuntu Gnome Team</a>
      </li>
    </ul>

To remove oneself from the support contacts, the user uses the same
'Support Contact' link and uncheck himself or the team he want to remove
from the support contact list.

    >>> user_browser.getLink('Support Contact').click()
    >>> user_browser.getControl(
    ...     "I want to be a support contact for Ubuntu").selected
    True
    >>> user_browser.getControl("Landscape Developers").selected
    True
    >>> user_browser.getControl("Landscape Developers").selected = False
    >>> user_browser.getControl("Ubuntu Gnome Team").selected
    True
    >>> user_browser.getControl("Ubuntu Gnome Team").selected = False
    >>> user_browser.getControl('Continue').click()

A confirmation message is displayed:

    >>> soup = BeautifulSoup(user_browser.contents)
    >>> for tag in soup.fetch('div', 'informational message'):
    ...     print tag.renderContents()
    Landscape Developers has been removed as a support contact for Ubuntu.
    Ubuntu Gnome Team has been removed as a support contact for Ubuntu.

Since support contacts are notified of changes to ticket, they are also
listed in the 'Also notified' list in the 'Subscribers' portlet on a
ticket.

    >>> user_browser.open(
    ...     'http://launchpad.dev/ubuntu/+ticket/7')
    >>> soup = BeautifulSoup(user_browser.contents)
    >>> portlet = soup.first('div', id='ticket-subscribers')
    >>> also_notified = portlet.first('b')
    >>> also_notified
    <b>Also notified:</b>
    >>> also_notified.findNextSibling('ul')
    <ul class="people">
      <li>
        <a href=".../~name12">Sample Person</a>
      </li>
    </ul>
