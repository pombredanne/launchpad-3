Check to see no CoC signature is registered for Mark:

  >>> from canonical.launchpad.ftests import login
  >>> admin_browser.open('http://localhost:9000/codeofconduct/console')
  >>> admin_browser.getControl(name='searchfor').value = ["all"]
  >>> admin_browser.getControl(name='name').value = "mark"
  >>> admin_browser.getControl(name='search').click()
  >>> "No signatures found." in admin_browser.contents
  True

Perform Acknowledge process as Foo bar person:

  >>> admin_browser.open('http://localhost:9000/codeofconduct/console/+new')
  >>> admin_browser.title
  'Acknowledge code of conduct signature'

  >>> admin_browser.getControl(name='field.owner').value = "mark@hbd.com"
  >>> admin_browser.getControl(name='UPDATE_SUBMIT').click()
  >>> admin_browser.url
  'http://localhost:9000/codeofconduct/console/'

Ensure the CoC was acknowledge by searching in the CoC Admin Console:

  >>> admin_browser.open('http://launchpad.dev/codeofconduct/console')
  >>> admin_browser.getControl(name='searchfor').value = ["all"]
  >>> admin_browser.getControl(name='name').value = "mark"
  >>> admin_browser.getControl(name='search').click()
  >>> 'paper submission accepted by Foo Bar' in admin_browser.contents
  True
  >>> '<a href="/~sabdfl">' in admin_browser.contents
  True
  >>> '[ACTIVE]' in admin_browser.contents
  True

Test if the advertisement email was sent:

  >>> import email, re
  >>> from canonical.launchpad.mail import stub
  >>> from_addr, to_addrs, raw_msg = stub.test_emails.pop()
  >>> msg = email.message_from_string(raw_msg)
  >>> print msg.get_payload(decode=True)
  <BLANKLINE>
  ...
  User: 'Mark Shuttleworth' 
  Paper Submitted acknowledge by Foo Bar
  ...

