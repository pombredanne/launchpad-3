This test verifies that we correctly handle keys which are in some way
special: either invalid, broken, revoked, expired, or already imported.

  >>> import email
  >>> from canonical.launchpad.mail import stub
  >>> from canonical.zeca.ftests.harness import ZecaTestSetup

  >>> z = ZecaTestSetup()
  >>> z.setUp()

  >>> sign_only   = "447D BF38 C4F9 C4ED 7522  46B7 7D88 9137 17B0 5A8F"
  >>> preimported = "A419AE861E88BC9E04B9C26FBA2B9389DFD20543"

Try to import a key which is already imported:

  >>> browser.addHeader('Authorization', 'Basic test@canonical.com:test')
  >>> browser.open('http://launchpad.dev/~name12/+editpgpkeys')
  >>> browser.getControl(name='fingerprint').value = preimported
  >>> browser.getControl(name='import').click()
  >>> "A message has been sent" in browser.contents
  False
  >>> stub.test_emails
  []
  >>> print browser.contents
  <BLANKLINE>
  ...
  ...has already been imported...

Finally, kill zeca:

  >>> z.tearDown()

