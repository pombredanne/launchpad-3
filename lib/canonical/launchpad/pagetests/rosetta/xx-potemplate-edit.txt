The POTemplate edit page lets us to edit basic aspect of that object. Only
product owners, Rosetta Experts or a Launchpad admin are able to use it.

Check to be sure that an unpriviledged user cannot reach this page

  >>> browser.addHeader('Authorization', 'Basic no-priv@canonical.com:test')
  >>> browser.open(
  ...     'http://translations.launchpad.dev/evolution/trunk/+pots/'
  ...     'evolution-2.2/+edit')
  Traceback (most recent call last):
  ...
  Unauthorized:...

XXX: CarlosPerelloMarin 20060517: We need to reset the Browser object to reset the headers.
See bug #45226 for more information.

  >>> from zope.testbrowser.testing import Browser
  >>> browser = Browser()
  >>> browser.handleErrors = False

Check to be sure that a Rosetta expert (Jordi) can reach the POTemplate edit
page.

  >>> browser.addHeader('Authorization', 'Basic jordi@ubuntu.com:test')
  >>> browser.open(
  ...     'http://translations.launchpad.dev/evolution/trunk/+pots/'
  ...     'evolution-2.2/+edit')
  >>> print browser.url
  http://translations.launchpad.dev/evolution/trunk/+pots/evolution-2.2/+edit

XXX: CarlosPerelloMarin 20060517: We need to reset the Browser object to reset the headers.
See bug #45226 for more information.

  >>> browser = Browser()
  >>> browser.handleErrors = False

And also, Sample Person, the owner of the product where this potemplate is,
should be able to edit it.

  >>> browser.addHeader('Authorization', 'Basic test@canonical.com:test')
  >>> browser.open(
  ...     'http://translations.launchpad.dev/evolution/trunk/+pots/'
  ...     'evolution-2.2/+edit')
  >>> print browser.url
  http://translations.launchpad.dev/evolution/trunk/+pots/evolution-2.2/+edit

We should be sure that the edit form get only the non admin fields.

  >>> browser.getControl(name='field.potemplatename').value
  Traceback (most recent call last):
  ...
  LookupError:...
  >>> browser.getControl(name='field.description').value
  'Template for evolution in hoary'
  >>> browser.getControl(name='field.header').value
  Traceback (most recent call last):
  ...
  LookupError:...
  >>> browser.getControl(name='field.iscurrent').value
  Traceback (most recent call last):
  ...
  LookupError:...
  >>> browser.getControl(name='field.owner').value
  'rosetta-admins'
  >>> browser.getControl(name='field.productseries').value
  Traceback (most recent call last):
  ...
  LookupError:...
  >>> browser.getControl(name='field.distroseries').value
  Traceback (most recent call last):
  ...
  LookupError:...
  >>> browser.getControl(name='field.sourcepackagename').value
  Traceback (most recent call last):
  ...
  LookupError:...
  >>> browser.getControl(name='field.sourcepackageversion').value
  Traceback (most recent call last):
  ...
  LookupError:...
  >>> browser.getControl(name='field.binarypackagename').value
  Traceback (most recent call last):
  ...
  LookupError:...
  >>> browser.getControl(name='field.languagepack').value
  Traceback (most recent call last):
  ...
  LookupError:...
  >>> browser.getControl(name='field.path').value
  Traceback (most recent call last):
  ...
  LookupError:...

And that we are able to POST it.

  >>> browser.getControl(name='field.description').value = u'foo'
  >>> browser.getControl(name='UPDATE_SUBMIT').click()
  >>> print browser.url
  http://translations.launchpad.dev/evolution/trunk/+pots/evolution-2.2

And the changed value is stored.

  >>> browser.open(
  ...     'http://translations.launchpad.dev/evolution/trunk/+pots/'
  ...     'evolution-2.2/+edit')
  >>> browser.getControl(name='field.description').value
  'foo'
