= Product search for pending bugwatches =

Users can search for product bugs that need a bugwatch to track an
upstream bug. This is a workflow feature for users who are adopting
upstream products. The general flow assumes a bug is marked as 'Affects
upstream', during the first round of triage. Another user can choose
'Show bugs that need to be forwarded to an upstream bug tracker' to
locate the bugs that need a bugwatch setup.


== Common searches on a product's bug page (part 1) ==

No Privileges Person visits the alsa-utils front page on Launchpad.
He wants to link Launchpad bugs to to the upstream bug tracker. He can
see that there are '0 bugs need forwarding upstream'.

    >>> user_browser.open('http://bugs.launchpad.dev/alsa-utils/')
    >>> user_browser.title
    'Bugs in ALSA utilities'

    >>> pending_watches_link = user_browser.getLink(
    ...     'need forwarding upstream')
    >>> pending_watches_link.text
    '0 bugs need forwarding upstream'


== Marking and searching for pending bugwatches ==

Sample Person is doing some bug reporting and triage for his adopted
alsa-utils project. He creates two bugs, and uses the 'Affects
upstream project' link to record that the bug is in the upstream
product. He does not provide bug watch information.

    >>> browser.addHeader("Authorization", 'Basic test@canonical.com:test')
    >>> browser.open('http://bugs.launchpad.dev/ubuntu/+source/alsa-utils/')
    >>> browser.getLink('Report a bug').click()
    >>> browser.getLink('complicated bug filing form').click()
    >>> browser.getControl('Summary').value = 'Test Bug 1'
    >>> browser.getControl('Further information').value = 'Test Bug 1'
    >>> browser.getControl('Submit').click()
    >>> print extract_text(find_main_content(browser.contents))
    Thank you for your bug report...

    >>> browser.getLink('Also affects project').click()
    >>> browser.getControl('Add to Bug Report').click()
    >>> browser.getControl('Yes, Add Anyway').click()
    >>> browser.title
    'Bug #... in alsa-utils: ...Test Bug 1...'

Sample Person visits the advanced search page for alsa-utils, and
chooses to search for all bugs that need to be forwarded upstream.
He sees one match.

    >>> browser.open('http://bugs.launchpad.dev/alsa-utils/')
    >>> browser.getLink('Advanced search').click()
    >>> pending_bugwatch_label = (
    ...     'Show only bugs that need to be forwarded to an upstream '
    ...     'bug tracker')
    >>> browser.getControl(pending_bugwatch_label).selected = True
    >>> browser.getControl('Search', index=0).click()
    >>> bug_listing = find_tag_by_id(browser.contents, 'buglisting')
    >>> print extract_text(bug_listing)
    Summary        Importance  Status
    ...Test Bug 1  Undecided   New


== Common searches on a product's bug page (part 2) ==

No Privileges Person returns to the alsa-utils front page on Launchpad.
He wants to link bugs to to the upstream bug tracker.

    >>> user_browser.open('http://bugs.launchpad.dev/alsa-utils/')
    >>> user_browser.title
    'Bugs in ALSA utilities'

    >>> pending_watches_link = user_browser.getLink(
    ...     'need forwarding upstream')
    >>> pending_watches_link.text
    '1 bug need forwarding upstream'
    
    >>> pending_watches_link.click()

    >>> bug_listing = find_tag_by_id(user_browser.contents, 'buglisting')
    >>> print extract_text(bug_listing)
    Summary        Importance  Status
    ...Test Bug 1  Undecided   New

