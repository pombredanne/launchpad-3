= Filing bugs on a Distribution from the front page =

On the Bugs front page there is a link to file a bug.

    >>> user_browser.open('http://bugs.launchpad.dev/')
    >>> user_browser.getLink('Report a bug').click()
    >>> user_browser.title
    'Report a bug'

Since it's not known on what the bug should be filed on, the page asks
for either a product or a package in a distribution.

    >>> user_browser.getControl('Project') is not None
    True
    >>> user_browser.getControl('Distribution') is not None
    True
    >>> user_browser.getControl('Package') is not None
    True

If we select a distribution that doesn't use Launchpad Bugs we will be
presented with a warning.

    >>> user_browser.getControl('Distribution').selected = True
    >>> user_browser.getControl(
    ...     name='field.bugtarget.distribution').value = ['debian']
    >>> user_browser.getControl('Summary').value = 'Evolution crashes'
    >>> user_browser.getControl('Continue').click()
    >>> for message in find_tags_by_class(user_browser.contents, 'warning'):
    ...     print extract_text(message)
    Debian does not use...
    ...
    You can refine and resubmit your bug report.

A link will be included to take the user back to the +filebug page:

    >>> user_browser.getLink('refine and resubmit').click()
    >>> user_browser.url
    'http://bugs.launchpad.dev/bugs/+filebug'

    >>> user_browser.getControl('Summary').value
    ''

After we selected a target and entered a summary, a list of possible
duplicates are presented.

    >>> user_browser.open('http://bugs.launchpad.dev/')
    >>> user_browser.getLink('Report a bug').click()

    >>> user_browser.getControl('Distribution').selected = True
    >>> user_browser.getControl(
    ...     name='field.bugtarget.distribution').value = ['ubuntu']
    >>> user_browser.getControl('Summary').value = 'Evolution crashes'
    >>> user_browser.getControl('Continue').click()

    >>> from canonical.launchpad.ftests.bug import print_bugs_list
    >>> print_bugs_list(user_browser.contents, "similar-bugs")
    #9 Thunderbird crashes
    Open, last updated 2006-07-14

Entering a description and submitting the bug takes the user to the bug
page.

    >>> user_browser.getControl('Further information').value = 'Crash.'
    >>> user_browser.getControl('Submit Bug Report').click()
    >>> user_browser.url
    'http://bugs.launchpad.dev/ubuntu/+bug/...'
    >>> user_browser.title
    'Bug #... in Ubuntu: ...Evolution crashes...'


== Bug on distribution, later switching to product ==

When reporting a new bug a user might enter a summary, leaving the
location as it is (which is Ubuntu, no package):

    >>> user_browser.open('http://bugs.launchpad.dev/')
    >>> user_browser.getLink('Report a bug').click()
    >>> user_browser.getControl('Summary').value = 'Foo'
    >>> user_browser.getControl('Continue').click()
    >>> user_browser.url
    'http://bugs.launchpad.dev/bugs/+filebug'
    >>> print find_main_content(user_browser.contents).renderContents()
    <...
    No similar bug reports were found...

Changing the bug location to a project, without choosing a specific
project, will fail form validation, where previously this caused an
OOPS.

    >>> user_browser.getControl('Project').selected = True
    >>> user_browser.getControl(name='field.comment').value = 'sausage'
    >>> user_browser.getControl('Submit Bug Report').click()
    >>> user_browser.url
    'http://bugs.launchpad.dev/bugs/+filebug'
    >>> print find_main_content(user_browser.contents).renderContents()
    <...
    No similar bug reports were found...
    >>> tags = find_tags_by_class(user_browser.contents, 'message')
    >>> for tag in tags:
    ...     print tag.renderContents()
    There is 1 error.
    Required input is missing.

Specifying a project and submitting will file the bug on the project
and not on the distribution:

    >>> user_browser.getControl(
    ...     name='field.bugtarget.product').value = 'firefox'
    >>> user_browser.getControl('Submit Bug Report').click()
    >>> user_browser.url
    'http://bugs.launchpad.dev/firefox/+bug/...'
    >>> user_browser.title
    'Bug #... in Mozilla Firefox...'


== Advanced filebug page ==

From the frontpage's filebug page it's possible to go to the advanced
filebug page and file a bug directly.

    >>> user_browser.open('http://bugs.launchpad.dev/')
    >>> user_browser.getLink('Report a bug').click()
    >>> user_browser.getLink('complicated bug filing form').click()
    >>> user_browser.title
    'Report a bug'

    >>> user_browser.getControl('Distribution').selected = True
    >>> user_browser.getControl(
    ...     name='field.bugtarget.distribution').value = ['ubuntu']
    >>> user_browser.getControl('Summary').value = 'Ubuntu crashes'
    >>> user_browser.getControl('Further information').value = 'Crash.'
    >>> user_browser.getControl('Submit Bug Report').click()
    >>> user_browser.url
    'http://bugs.launchpad.dev/ubuntu/+bug/...'
    >>> user_browser.title
    'Bug #... in Ubuntu: ...Ubuntu crashes...'

Trying to file a bug against a distribution that doesn't use 
Launchpad Bugs results in an informational page being displayed.

    >>> user_browser.open('http://bugs.launchpad.dev/')
    >>> user_browser.getLink('Report a bug').click()
    >>> user_browser.getLink('complicated bug filing form').click()
    >>> user_browser.getControl(
    ...     name='field.bugtarget.distribution').value = ['debian']
    >>> user_browser.getControl(
    ...     name='field.bugtarget.package').value = 'alsa-utils'
    >>> user_browser.getControl('Summary').value = 'Alsa crashes'
    >>> user_browser.getControl('Further information').value = 'Crash.'
    >>> user_browser.getControl('Submit Bug Report').click()
    >>> for message in find_tags_by_class(user_browser.contents, 'warning'):
    ...     print extract_text(message)
    Debian does not use...
    ...
    You can refine and resubmit your bug report.

