= Bug Reporting Guidelines =

Some helpful explanatory text - guidelines - can be set for
distributions, product groups and products.

    >>> primary_contexts = [
    ...     ('Ubuntu', 'ubuntu'), ('Mozilla', 'mozilla'),
    ...     ('Firefox', 'firefox')]

    >>> for context_name, context_path in primary_contexts:
    ...     edit_url = 'http://launchpad.dev/%s/+edit' % (context_path,)
    ...     admin_browser.open(edit_url)
    ...     admin_browser.getControl(
    ...         name='field.bug_reporting_guidelines').value = (
    ...         "The version of %s you're using." % (context_name,))
    ...     if context_path == 'ubuntu':
    ...         admin_browser.getControl('Change', index=3).click()
    ...     else:
    ...         admin_browser.getControl('Change').click()

The guidelines are not displayed on the initial basic bug-reporting
page, because that page does not include a bug description field.

    >>> def print_guidelines(name, browser):
    ...     print '* ' + name
    ...     print '  - ' + user_browser.url
    ...     print '  - ' + extract_text(find_tag_by_id(
    ...         user_browser.contents, 'bug-reporting-guidelines'))

    >>> for context_name, context_path in primary_contexts:
    ...     filebug_url = (
    ...         'http://launchpad.dev/%s/+filebug' % (context_path,))
    ...     user_browser.open(filebug_url)
    ...     guidelines = find_tag_by_id(
    ...         user_browser.contents, 'bug-reporting-guidelines')
    ...     if guidelines is not None:
    ...         print 'Found %s guidelines: %s' % (context_path, guidelines)

But they are displayed on the advanced bug-reporting page, which does
include a bug description field.

    >>> for context_name, context_path in primary_contexts:
    ...     filebug_url = (
    ...         'http://launchpad.dev/%s/+filebug-advanced' % (context_path,))
    ...     user_browser.open(filebug_url)
    ...     print_guidelines(context_name, user_browser)
    * Ubuntu
      - http://launchpad.dev/ubuntu/+filebug-advanced
      - Please include, if possible:
    The version of Ubuntu you're using.
    * Mozilla
      - http://launchpad.dev/mozilla/+filebug-advanced
      - Please include, if possible:
    The version of Mozilla you're using.
    * Firefox
      - http://launchpad.dev/firefox/+filebug-advanced
      - Please include, if possible:
    The version of Firefox you're using.

They are also displayed on the basic bug-reporting page, once you've
got to the step of entering a bug description.

    >>> user_browser.open('http://launchpad.dev/firefox/+filebug')
    >>> user_browser.getControl('Summary').value = "It doesn't work"
    >>> user_browser.getControl('Continue').click()
    >>> print extract_text(find_tag_by_id(
    ...     user_browser.contents, 'bug-reporting-guidelines'))
    Please include, if possible:
    The version of Firefox you're using.

Bugs can also be reported directly against distribution source
packages and distribution series, but for both of these the
guidelines are taken from their respective distributions.

    >>> user_browser.open(
    ...     'http://launchpad.dev/ubuntu/+source/evolution/+filebug-advanced')
    >>> print extract_text(find_tag_by_id(
    ...     user_browser.contents, 'bug-reporting-guidelines'))
    Please include, if possible:
    The version of Ubuntu you're using.

    >>> user_browser.open(
    ...     'http://launchpad.dev/ubuntu/warty/+filebug')
    >>> user_browser.getControl('Summary').value = "It doesn't work"
    >>> user_browser.getControl('Continue').click()
    >>> print extract_text(find_tag_by_id(
    ...     user_browser.contents, 'bug-reporting-guidelines'))
    Please include, if possible:
    The version of Ubuntu you're using.


== Edit Access ==

Unprivileged Launchpad users do not see the link to the page where the
bug reporting guidelines can be changed, but admins do.

    >>> import sys

    >>> for context_name, context_path in primary_contexts:
    ...     overview_url = 'http://launchpad.dev/%s' % (context_path,)
    ...     print '* ' + context_name
    ...     print '  - User:',
    ...     user_browser.open(overview_url)
    ...     try:
    ...         user_browser.getLink(url='/+edit')
    ...     except (SystemExit, KeyboardInterrupt):
    ...         raise
    ...     except:
    ...         print sys.exc_info()[0].__name__
    ...     print '  - Admin:',
    ...     admin_browser.open(overview_url)
    ...     print admin_browser.getLink(url='/+edit').text
    * Ubuntu
      - User: LinkNotFoundError
      - Admin: Change distribution details
    * Mozilla
      - User: LinkNotFoundError
      - Admin: Change details
    * Firefox
      - User: LinkNotFoundError
      - Admin: Change details

Unprivileged cannot access the page for changing bug reporting
guidelines.

    >>> import traceback

    >>> for context_name, context_path in primary_contexts:
    ...     edit_url = 'http://launchpad.dev/%s/+edit' % (context_path,)
    ...     print '* ' + context_name
    ...     try:
    ...         user_browser.open(edit_url)
    ...     except (SystemExit, KeyboardInterrupt):
    ...         raise
    ...     except:
    ...         print sys.exc_info()[0].__name__
    * Ubuntu
      Unauthorized
    * Mozilla
      Unauthorized
    * Firefox
      Unauthorized
