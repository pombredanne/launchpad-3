== Changing personal details ==

Foo Bar wants to check if his personal information is up to date in
Launchpad.

    >>> browser.addHeader('Authorization', 'Basic foo.bar@canonical.com:test')
    >>> browser.open('http://launchpad.dev/~name16')
    >>> browser.getLink('Personal Details').click()

    >>> browser.getControl('Display Name').value
    'Foo Bar'
    >>> browser.getControl('Name', index=1).value
    'name16'
    >>> browser.getControl('Timezone').value
    ['Africa/Johannesburg']
    >>> browser.getControl(name='field.gotchi.action').value
    ['keep']
    >>> browser.getControl(
    ...     'Hide my email addresses from other Launchpad users').selected
    False


He noticed that his information is out of date and will update it.
(If he leaves leading or trailing whitespace in the displayname it'll
be stripped) 

    >>> browser.getControl('Name', index=1).value = 'foobar'
    >>> browser.getControl('Display Name').value = '  Foo Bar2  '
    >>> browser.getControl(
    ...     'Hide my email addresses from other Launchpad users').click()
    >>> browser.getControl('Save').click()

    >>> browser.url
    'http://launchpad.dev/~foobar'

Now we check to make sure the displayname was changed and stripped.

    >>> browser.open('http://launchpad.dev/~foobar/+edit')
    >>> browser.getControl('Display Name').value
    'Foo Bar2'

And the email addresses are not shown on Foo Bar's home page to any random
user.

    >>> user_browser.open('http://launchpad.dev/~foobar')
    >>> 'foo.bar@canonical.com' in user_browser.contents
    False

He will also change his timezone and hackergotchi:

    >>> browser.getControl('Timezone').value = ['Africa/Dakar']
    >>> browser.getControl(name='field.gotchi.action').value = ['change']
    >>> import os
    >>> import canonical.launchpad
    >>> hackergotchi = os.path.join(
    ...     os.path.dirname(canonical.launchpad.__file__),
    ...     'pagetests/standalone/mypng.png')
    >>> browser.getControl(name='field.gotchi.image').add_file(
    ...     open(hackergotchi, 'r'), 'image/png', 'hackergotchi.png')
    >>> browser.getControl('Save').click()

    >>> browser.url
    'http://launchpad.dev/~foobar'
    >>> browser.getLink('Personal Details').click()
    >>> find_tag_by_id(browser.contents, 'field.gotchi_current_img').get('src')
    u'.../hackergotchi.png'
    >>> browser.getControl('Timezone').value
    ['Africa/Dakar']

