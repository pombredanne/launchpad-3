=============
Build Records
=============

Build records encapsulate a request to turn a source into a binary.
The webservice allows builds to be retrieved in the context of a source
publication.

First, we need to insert some fake changes file data in the librarian so that
source publications can be retrieved.

    >>> login('foo.bar@canonical.com')
    >>> from canonical.archiveuploader.tests import (
    ...     insertFakeChangesFileForAllPackageUploads)
    >>> insertFakeChangesFileForAllPackageUploads()
    >>> logout()

Retrieve a source publication:

    >>> cprov_archive = webservice.get("/~cprov/+archive/ppa").jsonBody()
    >>> pubs = webservice.named_get(
    ...     cprov_archive['self_link'], 'getPublishedSources').jsonBody()
    >>> source_pub = pubs['entries'][0]
    >>> builds = webservice.named_get(
    ...     source_pub['self_link'], 'getBuilds').jsonBody()

'builds' is a collection of Build records.  Each Build contains a number
of properties:

    >>> from lazr.restful.testing.webservice import pprint_entry
    >>> pprint_entry(builds['entries'][0])
    arch_tag: u'i386'
    archive_link: u'http://.../~cprov/+archive/ppa'
    build_log_url: u'http://.../~cprov/+archive/ppa/+build/26/+files/netapplet-1.0.0.tar.gz'
    buildstate: u'Failed to build'
    date_first_dispatched: None
    datebuilt: u'2007-07-08T00:00:01+00:00'
    datecreated: u'2007-07-08T00:00:00+00:00'
    dependencies: None
    distribution_link: u'http://.../ubuntu'
    pocket: u'Release'
    resource_type_link: u'http://.../#build'
    self_link: u'http://.../~cprov/+archive/ppa/+build/26'
    title: u'i386 build of cdrkit 1.0 in ubuntu breezy-autotest RELEASE'
    upload_log_url: None

