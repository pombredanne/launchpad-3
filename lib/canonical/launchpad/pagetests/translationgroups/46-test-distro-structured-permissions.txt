First, we state that netapplet is using Launchpad Translations.


    >>> admin_browser.open('http://launchpad.dev/netapplet')
    >>> admin_browser.getLink('Change details').click()
    >>> admin_browser.getControl(
    ...     'Translations for this project are done in Launchpad'
    ...     ).selected = True
    >>> admin_browser.getControl('Change').click()
    >>> print admin_browser.title
    Network Applet in Launchpad

We set the 'Structured' permission and select the 'Just a testing team'
as the translation group for the netapplet product...

    >>> admin_browser.getLink('Translations').click()
    >>> admin_browser.getLink('Change translators').click()
    >>> admin_browser.getControl('Translation group').displayOptions
    ['(no value)', 'Single-language Translators',
     'The PolyGlot Translation Group', 'Just a testing team']
    >>> admin_browser.getControl('Translation group').displayValue = [
    ...     'Just a testing team']
    >>> admin_browser.getControl(
    ...     'Translation Permission System').displayValue = ['Structured']
    >>> admin_browser.getControl('Change').click()
    >>> print admin_browser.title
    Translations of Network Applet in Launchpad

... and its associated project, GNOME.

    >>> admin_browser.open(
    ...     'http://translations.launchpad.dev/gnome/+changetranslators')
    >>> admin_browser.getControl('Translation group').displayValue = [
    ...     'Just a testing team']
    >>> admin_browser.getControl(
    ...     'Translation Permission System').displayValue = ['Structured']
    >>> admin_browser.getControl('Change').click()
    >>> print admin_browser.title
    Set translation group for The GNOME Project
    >>> for tag in find_tags_by_class(
    ...     admin_browser.contents, 'informational message'):
    ...     print tag.renderContents()
    Updated on ...

Now, we test that a member of a translation team is able to translate
directly, in this example, we are using 'tsukimi' account.

    >>> tsukimi_browser = setupBrowser(auth='Basic tsukimi@quaqua.net:test')
    >>> tsukimi_browser.open(
    ...     'http://translations.launchpad.dev/netapplet/trunk/+pots/' +
    ...         'netapplet/es/+translate')
    >>> content = find_main_content(tsukimi_browser.contents)
    >>> print content
    <...
    ...Translating into Spanish...
    ...Dial-up connection...

Next test is with a non member of that translation team, the 'No Privileges'
account. We check that we get the warning that we are not members of the team.

    >>> no_priv_browser = setupBrowser(auth='Basic no-priv@canonical.com:test')
    >>> no_priv_browser.open(
    ...     'http://translations.launchpad.dev/netapplet/trunk/+pots/' +
    ...         'netapplet/es/+translate')
    >>> content = find_main_content(no_priv_browser.contents)
    >>> print content
    <...
    ...Translating into Spanish...
    ...Your translations will be held for review...

And finally, we test that a language without a team lets to anyone (in this
case, the 'No Privileges' account) to translate directly.

    >>> no_priv_browser.open(
    ...     'http://translations.launchpad.dev/netapplet/trunk/+pots/' +
    ...         'netapplet/fr/+translate')
    >>> content = find_main_content(no_priv_browser.contents)
    >>> print content
    <...
    ...Translating into French...

    >>> portlet = find_portlet(no_priv_browser.contents, 'French translators')
    >>> print portlet.renderContents()
    <...No translators currently designated for this PO file...
