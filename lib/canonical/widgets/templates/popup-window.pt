<html
  xmlns:tal="http://xml.zope.org/namespaces/tal"
  xmlns:metal="http://xml.zope.org/namespaces/metal"
  xmlns:i18n="http://xml.zope.org/namespaces/i18n"
  >
    <head>
        <style type="text/css">
        <!--
            body {
                font-size: 80%;
            }
            h1 {
                font-size: 95%;
                display: block;
                background: #e0e0e0;
                padding: 0.5em;
            }
        -->
        </style>
        <script language="Javascript" type="text/javascript"
            tal:content="string:field = '${request/form/field}';" />
        <script language="Javascript" type="text/javascript">
            function update(value) {
                e = window.parent.document.getElementById(field);
                if (e == null) {
                    alert(field);
                }
                if (e != null) {
                    e.value = value;
                    hide();
                    }
            }
            function hide() {
                parent_doc = window.parent.document
                iframe = parent_doc.getElementById('popup_iframe_' + field);
                // XXX: kiko 2007-03-12:
                // when we alter the iframe's display value, the
                // @@popup-window page is reloaded for some reason, and
                // I can't find out why. I've tried
                // event.preventBubble() and return false.
                iframe.style.display = 'none';
                return false;
            }
        </script>
        <title tal:content="view/title">Title</title>
    </head>
    <body onLoad="document.searchform.search.focus()">
        <div style="float: right; padding: 0.5em;"><a href="#"
            style="text-decoration: none;" onClick="javascript: hide()"><small>[cancel]</small></a></div>
        <div tal:define="batchnav view/search">
            <h1 tal:content="view/title">Title</h1>
            <form method="get" name="searchform" style="text-align: center">
                <input type="text" name="search"
                    tal:attributes="value request/search|nothing" />
                <input type="submit" value="Search" />
                <input type="hidden" name="vocabulary"
                    tal:attributes="value request/vocabulary" />
                <input type="hidden" name="field"
                    tal:attributes="value request/field" />
            </form>

            <tal:has-search condition="request/search|nothing">
              <table tal:condition="view/hasMoreThanOnePage">
                <tr>
                    <th>
                        <a tal:attributes="href batchnav/prevBatchURL">&larr;</a>
                    </th>
                    <tal:x repeat="page_link batchnav/batchPageURLs">
                        <th tal:condition="python:not
                                str(page_link.keys()[0]).startswith('_')">
                            <a tal:attributes="href
                                    python:page_link.values()[0]"
                                tal:content="python:page_link.keys()[0]">#</a>
                        </th>
                    </tal:x>
                    <th>
                        <a tal:attributes="href batchnav/nextBatchURL">&rarr;</a>
                    </th>
                </tr>
              </table>
              <dl>
                  <tal:x repeat="item batchnav/currentBatch">
                      <dt><img src="/@@/bullet" alt="" border="" />
                          <a href="#" title="Click to select"
                              tal:content="item/token"
                              tal:attributes="onclick
                              string:update('${item/token}')">Token</a>
                      </dt>
                      <dd tal:content="item/title">Title</dd>
                  </tal:x>
              </dl>
              <tal:no-items condition="not: batchnav/currentBatch">
                  No results found for keyword '<span tal:replace="request/search" />'.
              </tal:no-items>
            </tal:has-search>
            <tal:extra-bottom condition="view/extra_bottom|nothing"
                              replace="structure view/extra_bottom" />
        </div>
    </body>
</html>
