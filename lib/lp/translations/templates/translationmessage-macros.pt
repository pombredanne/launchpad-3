<tal:root
  xmlns:tal="http://xml.zope.org/namespaces/tal"
  xmlns:metal="http://xml.zope.org/namespaces/metal"
  omit-tag="">

<metal:macro define-macro="render-suggestion">
<tal:submission condition="submission">
  <tal:not-empty condition="not:submission/is_empty">
    <tr tal:attributes="class string:secondary ${dismissable};
                        id submission/row_html_id">
      <th colspan="3" tal:content="section_title">
        Packaged:
      </th>
      <td class="icon left right">
        <tal:form-writeable condition="form_is_writeable">
        <tal:user-is-official-translator
          condition="user_is_official_translator">
        <input
          type="radio"
          tal:attributes="
            name string:${submission/translation_html_id}_radiobutton;
            id string:${submission/suggestion_html_id}_radiobutton;
            value string:${submission/suggestion_html_id};
            onClick string:
              javascript:copyInnerHTMLById(
                '${submission/suggestion_html_id}',
                '${submission/translation_html_id}_new')
            " />
        </tal:user-is-official-translator>
        <tal:user-is-not-official-translator condition="not:user_is_official_translator">
        <a href=""
          tal:attributes="
            onClick string:
              javascript:copyInnerHTMLById(
                '${submission/suggestion_html_id}',
                '${submission/translation_html_id}_new');;
              selectWidget('${submission/translation_html_id}_new_select', event);;
            return false;;
          "><img alt="Copy text" title="Copy text" src="/@@/copy" /></a>
        </tal:user-is-not-official-translator>
        </tal:form-writeable>
      </td>
      <td>
        <div
          tal:condition="not:user_is_official_translator"
          tal:attributes="
            lang submission/language/dashedcode;
            dir submission/language/abbreviated_text_dir;
            id string:${submission/suggestion_html_id}"
          tal:content="structure submission/suggestion_text">
          suggestion
        </div>
        <label
          style="white-space: normal"
          tal:condition="user_is_official_translator"
          tal:attributes="
            lang submission/language/dashedcode;
            dir submission/language/abbreviated_text_dir;
            id string:${submission/suggestion_html_id};
            for string:${submission/suggestion_html_id}_radiobutton;"
          tal:content="structure submission/suggestion_text">
          suggestion
        </label>
      </td>
    </tr>
    <tr
      tal:attributes="id string:${submission/origin_html_id};
                      class string:discreet secondary ${dismissable}">
      <td colspan="3"></td>
      <td class="icon left right">
        <tal:legal-warning condition="submission/legal_warning">
          <a href="http://help.launchpad.net/Translations/ReusingPackagedTranslations"
             class="legal-warning">
            <img alt="Legal warning" title="Do not use this translation before checking for license compatibility" src="/@@/warning" /></a>
        </tal:legal-warning>
      </td>
      <td style="overflow: auto;"
          tal:condition="submission/is_local_to_pofile">
        Suggested by
        <a tal:content="submission/person/displayname"
           tal:attributes="href submission/person/fmt:url">Foo Bar</a>
        <span
          tal:attributes="title submission/date_created/fmt:datetime"
          tal:content="submission/date_created/fmt:displaydate">
          2006-08-05
        </span>
      </td>
      <td style="overflow: auto;"
          tal:condition="not:submission/is_local_to_pofile">
        <tal:source content="string:${context/title}" />
        <a tal:content="submission/pofile/potemplate/displayname"
           tal:attributes="href string:${submission/translationmessage/fmt:url}/+translate">
          Spanish translation for evolution
        </a> by
        <a tal:content="submission/person/displayname"
           tal:attributes="href submission/person/fmt:url">Foo Bar</a>
        <span
          tal:attributes="title submission/date_created/fmt:datetime"
          tal:content="submission/date_created/fmt:displaydate">
          2006-08-05
        </span>
      </td>
    </tr>

  </tal:not-empty>
</tal:submission>

</metal:macro>

</tal:root>

