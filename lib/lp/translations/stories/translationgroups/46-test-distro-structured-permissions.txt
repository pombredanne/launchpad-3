First, we verify that netapplet is using Launchpad Translations.

    >>> admin_browser.open('http://launchpad.dev/netapplet')
    >>> admin_browser.getLink('Configure translations').click()
    >>> print_radio_button_field(admin_browser.contents, "translations_usage")
    ( ) Unknown
    (*) Launchpad
    ( ) External
    ( ) Not Applicable
    >>> admin_browser.getLink('Cancel').click()
    >>> print admin_browser.title
    Network Applet in Launchpad

We set the 'Structured' permission and select the 'Just a testing team'
as the translation group for the netapplet product...

    >>> admin_browser.getLink('Translations').click()
    >>> admin_browser.getLink('Configure translations').click()
    >>> admin_browser.getControl('Translation group').displayOptions
    ['(no value)', 'Single-language Translators',
     'The PolyGlot Translation Group', 'Just a testing team']

    >>> admin_browser.getControl('Translation group').displayValue = [
    ...     'Just a testing team']
    >>> admin_browser.getControl(
    ...     'Translation permissions policy').displayValue = ['Structured']
    >>> admin_browser.getControl('Change').click()
    >>> print admin_browser.title
    Translations : NetApplet

... and its associated project, GNOME.

    >>> admin_browser.open(
    ...     'http://translations.launchpad.dev/gnome/+settings')
    >>> admin_browser.getControl('Translation group').displayValue = [
    ...     'Just a testing team']
    >>> admin_browser.getControl(
    ...     'Translation permissions policy').displayValue = ['Structured']
    >>> admin_browser.getControl('Change').click()
    >>> admin_browser.url
    'http://translations.launchpad.dev/gnome'

Now, we test that a member of a translation team is able to translate
directly, in this example, we are using 'tsukimi' account.

    >>> tsukimi_browser = setupBrowser(auth='Basic tsukimi@quaqua.net:test')
    >>> tsukimi_browser.open(
    ...     'http://translations.launchpad.dev/netapplet/trunk/+pots/' +
    ...         'netapplet/es/+translate')
    >>> content = find_main_content(tsukimi_browser.contents)
    >>> print content
    <...
    ...Translating into Spanish...
    ...Dial-up connection...

Next test is with a non member of that translation team, the 'No
Privileges' account. We check that we get the warning that we are not
members of the team.

    >>> no_priv_browser = setupBrowser(
    ...     auth='Basic no-priv@canonical.com:test')
    >>> no_priv_browser.open(
    ...     'http://translations.launchpad.dev/netapplet/trunk/+pots/' +
    ...         'netapplet/es/+translate')
    >>> content = find_main_content(no_priv_browser.contents)
    >>> print content
    <...
    ...Translating into Spanish...
    ...Your suggestions will be held for review...

And finally, we test that a language without a team lets anyone (in this
case, the 'No Privileges' account) to translate directly.

    >>> no_priv_browser.open(
    ...     'http://translations.launchpad.dev/netapplet/trunk/+pots/' +
    ...         'netapplet/fr/+translate')
    >>> content = find_main_content(no_priv_browser.contents)
    >>> print content
    <...
    ...Translating into French...
