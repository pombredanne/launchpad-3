= Revision Details =

Recent revisions are shown on the main branch page.

    >>> login(ANONYMOUS)
    >>> branch = factory.makeAnyBranch()
    >>> revision = factory.makeRevision(
    ...     author="Eric the Viking <eric@vikings-r-us.example.com>",
    ...     log_body=(
    ...         "Testing the email address in revisions\n"
    ...         "email Bob (bob@example.com) for details."))
    >>> ignored = branch.createBranchRevision(1, revision)
    >>> branch.updateScannedDetails(revision, 1)
    >>> branch_url = canonical_url(branch)
    >>> logout()

There is a heading for the recent revisions.

    >>> user_browser.open(branch_url)
    >>> print_tag_with_id(user_browser.contents, 'recent-revisions')
    Recent revisions
    1. By Eric the Viking &lt;eric@vikings-r-us.example.com&gt; ...
    Testing the email address in revisions
    email Bob (bob@example.com) for details.
    ...

If the user is not logged in, the email addresses are hidden in both the
revision author and the commit message.

    >>> anon_browser.open(branch_url)
    >>> print_tag_with_id(anon_browser.contents, 'recent-revisions')
    Recent revisions
    1. By Eric the Viking &lt;email address hidden&gt; ...
    Testing the email address in revisions
    email Bob (&lt;email address hidden&gt;) for details.
    ...
