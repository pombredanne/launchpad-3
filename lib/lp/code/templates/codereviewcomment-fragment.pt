<tal:root
   xmlns:tal="http://xml.zope.org/namespaces/tal"
   xmlns:metal="http://xml.zope.org/namespaces/metal"
   omit-tag="">
  <div class="boardCommentSummary"
       tal:attributes="id string:comment${context/id}"
       tal:define="expanded_id string:comment-ex${context/id};
                   contracted_id string:comment-ct${context/id};">
    <tal:full-comment
        define="comment context;
                show_expander view/show_expanders;
                expander_link string:/@@/treeExpanded;
                long_message view/is_long_message|nothing;
                display_style python: view.full_comment and 'display: block' or 'display: none';
                id expanded_id;
                message comment/message/text_contents;
                expander_text string:hide full message;
                ">
      <div metal:use-macro="context/@@+macros/comment-display" />
    </tal:full-comment>

    <tal:short-comment condition="view/is_long_message|nothing"
        define="comment context;
                show_expander python: True;
                expander_link string:/@@/treeCollapsed;
                display_style python: 'display: block';
                id contracted_id;
                message view/message_summary|nothing;
                expander_text string:show full message;
                ">
      <div metal:use-macro="context/@@+macros/comment-display" />
    </tal:short-comment>

  </div>
  <div class="commentSuffix">
    <div class="commentVote">
      <tal:reply tal:define="link context/menu:context/reply"
                 tal:condition="link/enabled"
                 tal:replace="structure link/render">
        Add comment
      </tal:reply>
    </div>

  </div>



</tal:root>
