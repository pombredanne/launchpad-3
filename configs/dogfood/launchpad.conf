# identify the component configuration used to define the site:
site-definition site.zcml

# Turn off Zope3 developer mode.
devmode off

# number of bytecode instructions to execute between checks for
# interruptions (SIGINTR, thread switches):
interrupt-check-interval 200

<server>
  type HTTP
  address 9020
</server>

# non-persistent in-memory storage
<zodb>
  <mappingstorage/>
</zodb>

<accesslog>
  <logfile>
    path launchpad-access.log
  </logfile>
</accesslog>

<eventlog>
  <logfile>
    path launchpad.log
  </logfile>
</eventlog>

# Launchpad configuration. Note that we can specify multiple configurations
# in here. Currently, we have configurations named 'testrunner' (used
# by the testrunner), and 'default' (used by everything else)
#
# The section that is used can be specified by setting the LPCONFIG_SECTION
# environment variable
#
<canonical default>
    # DB settings must still match launchpad-sql-configure-normal.zcml
    dbname launchpad_dogfood
    #dbhost localhost

    # Display tracebacks on error pages.
    # IMPORTANT: Set to false on production servers!
    show_tracebacks true

    # This is the email address used for the Errors-To: header on
    # all outgoing emails. At somepoint a bounce handler will be
    # installed here to detect failing email addresses and flag them
    # in the database.
    bounce_address bounces@canonical.com

    <launchpad>
        dbuser launchpad

        errors_address launchpad-error-reports@lists.canonical.com
        bugs_domain bugs.launchpad.ubuntu.com

        is_demo true
        site_message This site is running testing code. Please report all bugs.

        <virtual_hosts>
            use_https yes
            <mainsite>
                hostname dogfood.launchpad.net
                althostnames localhost
            </mainsite>
            <blueprints>
                hostname blueprints.dogfood.launchpad.net
            </blueprints>
            <code>
                hostname code.dogfood.launchpad.net
            </code>
            <translations>
                hostname translations.dogfood.launchpad.net
            </translations>
            <bugs>
                hostname bugs.dogfood.launchpad.net
            </bugs>
            <answers>
                hostname answers.dogfood.launchpad.net
            </answers>
            <openid>
                hostname openid.launchpad.dev
            </openid>
            <shipitubuntu>
                hostname ubuntu.shipit.dogfood.launchpad.net
                althostnames shipit.dogfood.launchpad.net
            </shipitubuntu>
            <shipitkubuntu>
                hostname kubuntu.shipit.dogfood.launchpad.net
            </shipitkubuntu>
            <shipitedubuntu>
                hostname edubuntu.shipit.dogfood.launchpad.net
            </shipitedubuntu>
            <xmlrpc>
                hostname xmlrpc.dogfood.launchpad.net
                rooturl https://dogfood.launchpad.net/
            </xmlrpc>
            <xmlrpc-private>
                hostname xmlrpc-private.launchpad.net
            </xmlrpc-private>
            <feeds>
                hostname feeds.launchpad.net
            </feeds>
        </virtual_hosts>

        <launchpad_errorreports>
            errordir /srv/launchpad.net/dogfood-logs
            oops_prefix DF
            copy_to_zlog false
        </launchpad_errorreports>

        <launchpad_session>
            dbuser session
            dbname session_dogfood
        </launchpad_session>

    </launchpad>

    <librarian>
        # Librarian configuration information for both client and server
        dbuser librarian
        upload_host localhost
        upload_port 9090
        download_host librarian.dogfood.launchpad.net
        download_port 9080
        download_url http://librarian.dogfood.launchpad.net/
        buildd_download_url http://librarian.dogfood.launchpad.net/
        <librarian_server>
            # Configuration used if we are running a librarian server.
            root /srv/launchpad.net/librarian
            # If true, a Librarian server will be launched by the startup
            # script
            launch yes
            # Should Librarian twistd be run with --spew for debugging
            spew no
            upstream_host librarian.ubuntu.com
            upstream_port 80
        </librarian_server>
        <librarian_gc>
            dbuser librariangc
        </librarian_gc>
    </librarian>

    <malone>
        # The From address for Malone email interface errors
        bugmail_error_from_address noreply@bugs.launchpad.ubuntu.com
    </malone>

    <shipit>
        # XXX: salgado 2006-06-16 bug=50033:
        # Even though this is empty, it must be kept so that the default
        # values are used. See https://launchpad.net/bugs/50033 for details.
    </shipit>

    <rosetta>
        # XXX: danilo 2007-02-07 bug=50033:
        # Even though this is empty, it must be kept so that the default
        # values are used. See https://launchpad.net/bugs/50033 for details.
        <rosettaadmin>
        </rosettaadmin>
    </rosetta>

    <zopeless>
        # Configuration specific for code that is running in the Zopeless
        # environment. Hopefully this section will disappear when the
        # Zope and Zopeless environments grow closer.
        send_email true
        smtp_host localhost
        smtp_port 25
    </zopeless>

    <gpghandler>
        host keyserver.internal
        public_host keyserver.ubuntu.com
        port 11371
    </gpghandler>

    <distributionmirrorprober>
        dbuser distributionmirror
        cdimage_file_list_url http://releases.ubuntu.com/.manifest
        timeout 30
    </distributionmirrorprober>

    <zeca>
        # where the pre-installed key-files will be copied to (every
        # initialization, see lib/zeca/ftest/harness.py)
        root /var/tmp/zeca
    </zeca>

    <statistician>
        dbuser statistician
    </statistician>

    <processmail>
        dbuser processmail
    </processmail>

    <gina>
        # Configuration used to run gina.
        dbuser gina

       <gina_target breezy>
            distro ubuntu
            distroseries breezy
            pocketrelease breezy
            root /srv/archive.ubuntu.com/ubuntu
            keyrings /usr/share/keyrings
            architectures i386,amd64,powerpc
            components main,universe,restricted
        </gina_target>

       <gina_target breezy-updates>
            distro ubuntu
            distroseries breezy-updates
            pocketrelease breezy
            pocket updates
            root /srv/archive.ubuntu.com/ubuntu
            keyrings /usr/share/keyrings
            architectures i386,amd64,powerpc
            components main,universe,restricted
        </gina_target>

       <gina_target breezy-security>
            distro ubuntu
            distroseries breezy-security
            pocketrelease breezy
            pocket security
            root /srv/archive.ubuntu.com/ubuntu
            keyrings /usr/share/keyrings
            architectures i386,amd64,powerpc
            components main,universe,restricted
        </gina_target>

       <gina_target warty>
            distro ubuntu
            distroseries warty
            pocketrelease warty
            root /srv/archive.ubuntu.com/ubuntu
            keyrings /usr/share/keyrings
            architectures i386,amd64,powerpc
            components main,universe,restricted
        </gina_target>

       <gina_target warty-updates>
            distro ubuntu
            distroseries warty-updates
            pocketrelease warty
            pocket updates
            root /srv/archive.ubuntu.com/ubuntu
            keyrings /usr/share/keyrings
            architectures i386,amd64,powerpc
            components main,universe,restricted
        </gina_target>

       <gina_target warty-security>
            distro ubuntu
            distroseries warty-security
            pocketrelease warty
            pocket security
            root /srv/archive.ubuntu.com/ubuntu
            keyrings /usr/share/keyrings
            architectures i386,amd64,powerpc
            components main,universe,restricted
        </gina_target>

       <gina_target hoary>
            distro ubuntu
            distroseries hoary
            pocketrelease hoary
            root /srv/archive.ubuntu.com/ubuntu
            keyrings /usr/share/keyrings
            architectures i386,amd64,powerpc
            components main,universe,restricted
        </gina_target>

       <gina_target hoary-updates>
            distro ubuntu
            distroseries hoary-updates
            pocketrelease hoary
            pocket updates
            root /srv/archive.ubuntu.com/ubuntu
            keyrings /usr/share/keyrings
            architectures i386,amd64,powerpc
            components main,universe,restricted
        </gina_target>

       <gina_target hoary-security>
            distro ubuntu
            distroseries hoary-security
            pocketrelease hoary
            pocket security
            root /srv/archive.ubuntu.com/ubuntu
            keyrings /usr/share/keyrings
            architectures i386,amd64,powerpc
            components main,universe,restricted
        </gina_target>

       <gina_target dapper-partner>
            distro ubuntu
            distroseries dapper
            pocketrelease dapper-commercial
            pocket release
            root /srv/launchpad.net/archive.canonical.com
            keyrings /usr/share/keyrings
            architectures i386,amd64
            components main
            componentoverride partner
        </gina_target>

       <gina_target edgy-partner>
            distro ubuntu
            distroseries edgy
            pocketrelease edgy-commercial
            pocket release
            root /srv/launchpad.net/archive.canonical.com
            keyrings /usr/share/keyrings
            architectures i386,amd64
            components main
            componentoverride partner
        </gina_target>

       <gina_target feisty-partner>
            distro ubuntu
            distroseries feisty
            pocketrelease feisty-commercial
            pocket release
            root /srv/launchpad.net/archive.canonical.com
            keyrings /usr/share/keyrings
            architectures i386,amd64
            components main
            componentoverride partner
        </gina_target>

    </gina>

    <buildsequencer>
        mailproblemsto celso.providelo@gmail.com
        launch no
        logfile -
        <buildsequencer_job slave_scanner>
            command cronscripts/buildd-slave-scanner.py
            mindelay 10
        </buildsequencer_job>
    </buildsequencer>

    <uploader>
        dbuser uploader
        default_recipient_name Launchpad Dogfood
        default_recipient_address launchpad@localhost
        default_sender_name Launchpad Dogfood
        default_sender_address no_reply@launchpad.net
    </uploader>

    <uploadqueue>
        dbuser queued
    </uploadqueue>

    <builddmaster>
        dbuser fiera
        # Here, we really do want to invoke the uploader.
        uploader scripts/process-upload.py -Mvv --context buildd
        root /srv/launchpad.net/builddmaster/
        socket_timeout 600
        # l-b-a & SourcePackageRelease.creator failure notification
        # enabled by default
        # send_build_notification no
        # notify_owner no
    </builddmaster>

    <supermirror>
        dbuser supermirror
        branchesdest /var/tmp/sm-ng/mirrors
        masterlock /var/tmp/sm-ng/masterlock
        authserver_url http://localhost:8999/branch/
        warehouse_root_url http://bazaar.launchpad.dev/+branches/
    </supermirror>

    <branchscanner>
        dbuser branchscanner
    </branchscanner>

    <codehosting>
        authserver http://authserver.launchpad.net:8999/v2/
        host_key_pair_path keys
        branches_root /srv/supermirror-ng/push-branches/
    </codehosting>

    <codeimport>
    </codeimport>

    <personalpackagearchive>
        root /srv/launchpad.net/ppa/
        base_url http://ppa.dogfood.launchpad.net/
    </personalpackagearchive>

    <archivepublisher>
        root /srv/launchpad.net/ppa/
        base_url http://ppa.dogfood.launchpad.net/
    </archivepublisher>

    <mailman>
        <mailman-build>
        </mailman-build>
    </mailman>

</canonical>

# This is the config used by the test runner.
<canonical testrunner>
    dbname launchpad_ftest
    show_tracebacks true
    # chunkydiff may be turned off temporarily to help diagnose test
    # failures, but please don't commit this setting to rocketfuel.
    chunkydiff on

    bounce_address bounces@canonical.com

    <launchpad>
        dbuser launchpad
        errors_address launchpad-error-reports@lists.canonical.com
        bugs_domain bugs.staging.ubuntu.com
        <launchpad_errorreports>
            errordir /var/tmp/lperr.test
            oops_prefix T
            copy_to_zlog false
        </launchpad_errorreports>
    </launchpad>
    <librarian>
        dbuser librarian
        upload_host localhost
        upload_port 59090
        download_host localhost
        download_port 58000
        download_url http://localhost:58000/
        buildd_download_url http://localhost:58000/
        <librarian_server>
            launch no
            root /var/tmp/fatsam.test
        </librarian_server>
    </librarian>
    <zopeless>
        send_email false
    </zopeless>

    <uploader>
        dbuser uploader
        default_recipient_name Root
        default_recipient_address root@localhost
        default_sender_name Root
        default_sender_address root@localhost
    </uploader>

    <uploadqueue>
        dbuser queued
    </uploadqueue>

    <builddmaster>
        dbuser fiera
        # Test suite running doesn't want the complication of the uploader
        uploader /bin/echo Uploader invocation in:
        root /var/tmp/builddmaster/
        socket_timeout 10
    </builddmaster>

    <personalpackagearchive>
        root /srv/launchpad.net/ppa/
        base_url http://ppa.dogfood.launchpad.net/
    </personalpackagearchive>

    <archivepublisher>
        root /srv/launchpad.net/ppa/
        base_url http://ppa.dogfood.launchpad.net/
    </archivepublisher>

</canonical>
